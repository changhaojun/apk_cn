(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"3F3D":function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=t("ZZ/e"),o=(t("rxhA"),t("DZkv")),i=t("vqDt"),a=function(){return(a=Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++)for(var u in l=arguments[t])Object.prototype.hasOwnProperty.call(l,u)&&(n[u]=l[u]);return n}).apply(this,arguments)},r=function(n,l,t,e){return new(t||(t=Promise))(function(u,o){function i(n){try{r(e.next(n))}catch(l){o(l)}}function a(n){try{r(e.throw(n))}catch(l){o(l)}}function r(n){n.done?u(n.value):new t(function(l){l(n.value)}).then(i,a)}r((e=e.apply(n,l||[])).next())})},s=function(n,l){var t,e,u,o,i={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,e&&(u=2&o[0]?e.return:o[0]?e.throw||((u=e.return)&&u.call(e),0):e.next)&&!(u=u.call(e,o[1])).done)return u;switch(e=0,u&&(o=[2&o[0],u.value]),o[0]){case 0:case 1:u=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,e=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(u=(u=i.trys).length>0&&u[u.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!u||o[1]>u[0]&&o[1]<u[3])){i.label=o[1];break}if(6===o[0]&&i.label<u[1]){i.label=u[1],u=o;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(o);break}u[2]&&i.ops.pop(),i.trys.pop();continue}o=l.call(n,i)}catch(a){o=[6,a],e=0}finally{t=u=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=function(){function n(n,l,t,e,u){this.navCtrl=n,this.alertController=l,this.localDb=t,this.data=e,this.modalCtrl=u}return n.prototype.ngOnInit=function(){},n.prototype.navToDevices=function(){this.navCtrl.navigateForward("/settings/devices")},n.prototype.navToUnits=function(){this.navCtrl.navigateForward("/settings/units")},n.prototype.navToConsumptionRanges=function(){this.navCtrl.navigateForward("/settings/consumption-ranges")},n.prototype.navToAbout=function(){this.navCtrl.navigateForward("/settings/about")},n.prototype.presentClearMesurementsConfirm=function(){return r(this,void 0,void 0,function(){var n=this;return s(this,function(l){switch(l.label){case 0:return[4,this.alertController.create({header:"清除测量数据",message:"你想清除所有的测量数据吗?",buttons:[{text:"取消",role:"cancel",handler:function(){console.log("cancel clicked")}},{text:"清除",handler:function(){return r(n,void 0,void 0,function(){var n,l,t;return s(this,function(e){switch(e.label){case 0:n=this.data.user.devices,l=0,e.label=1;case 1:return n&&l<n.length?[4,this.localDb.clearMeasurementsByDeviceId((t=n[l]).id)]:[3,6];case 2:return e.sent(),[4,this.localDb.deleteDeviceClosedMeasurement(t.id)];case 3:return e.sent(),[4,this.localDb.addDeviceClosedMeasurement(t.id)];case 4:e.sent(),e.label=5;case 5:return l++,[3,1];case 6:return[2]}})})}}]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}})})},n.prototype.notificationToggleChanged=function(n){console.log(n.detail.checked),this.data.user.allowNotifications=n.detail.checked,this.localDb.updateUser(a({},this.data.user))},n.prototype.presentHelpModal=function(){return r(this,void 0,void 0,function(){var n,l=this;return s(this,function(t){switch(t.label){case 0:return[4,this.modalCtrl.create({component:o.a,componentProps:{onboarding:!0,isDeviceListEmpty:!(this.data.user.devices&&this.data.user.devices.length>0)},cssClass:"transparent-modal",showBackdrop:!1})];case 1:return(n=t.sent()).onDidDismiss().then(function(n){console.log("data",n),n&&n.data&&n.data.isDeviceListEmpty&&l.presentAddDeviceModal()}),[4,n.present()];case 2:return[2,t.sent()]}})})},n.prototype.presentAddDeviceModal=function(n){return r(this,void 0,void 0,function(){return s(this,function(l){switch(l.label){case 0:return[4,this.modalCtrl.create({component:i.a,componentProps:{device:n?a({},n):null}})];case 1:return[4,l.sent().present()];case 2:return[2,l.sent()]}})})},n}(),b=function(){return function(){}}(),p=t("pMnS"),d=t("oBZk"),h=t("gIcY"),f=t("cJ9r"),m=t("POIX"),g=e.nb({encapsulation:0,styles:[[""]],data:{}});function v(n){return e.Eb(0,[(n()(),e.pb(0,0,null,null,11,"ion-header",[],null,null,null,d.S,d.o)),e.ob(1,49152,null,0,u.C,[e.h,e.k],null,null),(n()(),e.pb(2,0,null,0,9,"ion-toolbar",[["color","primary"]],null,null,null,d.hb,d.D)),e.ob(3,49152,null,0,u.Cb,[e.h,e.k],{color:[0,"color"]},null),(n()(),e.pb(4,0,null,0,4,"ion-buttons",[["slot","start"]],null,null,null,d.H,d.d)),e.ob(5,49152,null,0,u.m,[e.h,e.k],null,null),(n()(),e.pb(6,0,null,0,2,"ion-back-button",[],null,[[null,"click"]],function(n,l,t){var u=!0;return"click"===l&&(u=!1!==e.yb(n,8).onClick(t)&&u),u},d.F,d.b)),e.ob(7,49152,null,0,u.h,[e.h,e.k],null,null),e.ob(8,16384,null,0,u.i,[[2,u.ib],u.Ib],null,null),(n()(),e.pb(9,0,null,0,2,"ion-title",[],null,null,null,d.fb,d.B)),e.ob(10,49152,null,0,u.Ab,[e.h,e.k],null,null),(n()(),e.Db(-1,0,["设置"])),(n()(),e.pb(12,0,null,null,59,"ion-content",[["padding",""]],null,null,null,d.O,d.k)),e.ob(13,49152,null,0,u.v,[e.h,e.k],null,null),(n()(),e.pb(14,0,null,0,57,"ion-list",[],null,null,null,d.W,d.s)),e.ob(15,49152,null,0,u.P,[e.h,e.k],null,null),(n()(),e.pb(16,0,null,0,6,"ion-item",[["button",""],["detail","false"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.navToDevices()&&e),e},d.U,d.q)),e.ob(17,49152,null,0,u.I,[e.h,e.k],{button:[0,"button"],detail:[1,"detail"]},null),(n()(),e.pb(18,0,null,0,1,"ion-icon",[["slot","start"],["src","/assets/icon/shower-solid.svg"]],null,null,null,d.T,d.p)),e.ob(19,49152,null,0,u.D,[e.h,e.k],{src:[0,"src"]},null),(n()(),e.pb(20,0,null,0,2,"ion-label",[["text-wrap",""]],null,null,null,d.V,d.r)),e.ob(21,49152,null,0,u.O,[e.h,e.k],null,null),(n()(),e.Db(-1,0,[" 设备 "])),(n()(),e.pb(23,0,null,0,6,"ion-item",[["button",""],["detail","false"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.navToUnits()&&e),e},d.U,d.q)),e.ob(24,49152,null,0,u.I,[e.h,e.k],{button:[0,"button"],detail:[1,"detail"]},null),(n()(),e.pb(25,0,null,0,1,"ion-icon",[["name","thermometer"],["slot","start"]],null,null,null,d.T,d.p)),e.ob(26,49152,null,0,u.D,[e.h,e.k],{name:[0,"name"]},null),(n()(),e.pb(27,0,null,0,2,"ion-label",[["text-wrap",""]],null,null,null,d.V,d.r)),e.ob(28,49152,null,0,u.O,[e.h,e.k],null,null),(n()(),e.Db(-1,0,[" 单位 "])),(n()(),e.pb(30,0,null,0,6,"ion-item",[["button",""],["detail","false"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.navToConsumptionRanges()&&e),e},d.U,d.q)),e.ob(31,49152,null,0,u.I,[e.h,e.k],{button:[0,"button"],detail:[1,"detail"]},null),(n()(),e.pb(32,0,null,0,1,"ion-icon",[["slot","start"],["src","/assets/icon/smile-regular.svg"]],null,null,null,d.T,d.p)),e.ob(33,49152,null,0,u.D,[e.h,e.k],{src:[0,"src"]},null),(n()(),e.pb(34,0,null,0,2,"ion-label",[["text-wrap",""]],null,null,null,d.V,d.r)),e.ob(35,49152,null,0,u.O,[e.h,e.k],null,null),(n()(),e.Db(-1,0,[" 成本范围 "])),(n()(),e.pb(37,0,null,0,13,"ion-item",[],null,null,null,d.U,d.q)),e.ob(38,49152,null,0,u.I,[e.h,e.k],null,null),(n()(),e.pb(39,0,null,0,1,"ion-icon",[["name","notifications"],["slot","start"]],null,null,null,d.T,d.p)),e.ob(40,49152,null,0,u.D,[e.h,e.k],{name:[0,"name"]},null),(n()(),e.pb(41,0,null,0,2,"ion-label",[["text-wrap",""]],null,null,null,d.V,d.r)),e.ob(42,49152,null,0,u.O,[e.h,e.k],null,null),(n()(),e.Db(-1,0,[" 允许通知 "])),(n()(),e.pb(44,0,null,0,6,"ion-toggle",[["slot","end"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionChange"],[null,"ngModelChange"],[null,"ionBlur"]],function(n,l,t){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==e.yb(n,45)._handleBlurEvent()&&u),"ionChange"===l&&(u=!1!==e.yb(n,45)._handleIonChange(t.target.checked)&&u),"ionChange"===l&&(u=!1!==o.notificationToggleChanged(t)&&u),"ngModelChange"===l&&(u=!1!==(o.data.user.allowNotifications=t)&&u),u},d.gb,d.C)),e.ob(45,16384,null,0,u.c,[e.k],null,null),e.Ab(1024,null,h.f,function(n){return[n]},[u.c]),e.ob(47,671744,null,0,h.i,[[8,null],[8,null],[8,null],[6,h.f]],{model:[0,"model"]},{update:"ngModelChange"}),e.Ab(2048,null,h.g,null,[h.i]),e.ob(49,16384,null,0,h.h,[[4,h.g]],null,null),e.ob(50,49152,null,0,u.Bb,[e.h,e.k],null,null),(n()(),e.pb(51,0,null,0,6,"ion-item",[["button",""],["detail","false"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.presentClearMesurementsConfirm()&&e),e},d.U,d.q)),e.ob(52,49152,null,0,u.I,[e.h,e.k],{button:[0,"button"],detail:[1,"detail"]},null),(n()(),e.pb(53,0,null,0,1,"ion-icon",[["name","trash"],["slot","start"]],null,null,null,d.T,d.p)),e.ob(54,49152,null,0,u.D,[e.h,e.k],{name:[0,"name"]},null),(n()(),e.pb(55,0,null,0,2,"ion-label",[["text-wrap",""]],null,null,null,d.V,d.r)),e.ob(56,49152,null,0,u.O,[e.h,e.k],null,null),(n()(),e.Db(-1,0,[" 清除测量数据 "])),(n()(),e.pb(58,0,null,0,6,"ion-item",[["button",""],["detail","false"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.presentHelpModal()&&e),e},d.U,d.q)),e.ob(59,49152,null,0,u.I,[e.h,e.k],{button:[0,"button"],detail:[1,"detail"]},null),(n()(),e.pb(60,0,null,0,1,"ion-icon",[["name","help-circle-outline"],["slot","start"]],null,null,null,d.T,d.p)),e.ob(61,49152,null,0,u.D,[e.h,e.k],{name:[0,"name"]},null),(n()(),e.pb(62,0,null,0,2,"ion-label",[["text-wrap",""]],null,null,null,d.V,d.r)),e.ob(63,49152,null,0,u.O,[e.h,e.k],null,null),(n()(),e.Db(-1,0,[" 帮助 "])),(n()(),e.pb(65,0,null,0,6,"ion-item",[["button",""],["detail","false"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.navToAbout()&&e),e},d.U,d.q)),e.ob(66,49152,null,0,u.I,[e.h,e.k],{button:[0,"button"],detail:[1,"detail"]},null),(n()(),e.pb(67,0,null,0,1,"ion-icon",[["name","information-circle-outline"],["slot","start"]],null,null,null,d.T,d.p)),e.ob(68,49152,null,0,u.D,[e.h,e.k],{name:[0,"name"]},null),(n()(),e.pb(69,0,null,0,2,"ion-label",[["text-wrap",""]],null,null,null,d.V,d.r)),e.ob(70,49152,null,0,u.O,[e.h,e.k],null,null),(n()(),e.Db(-1,0,[" 关于 "]))],function(n,l){var t=l.component;n(l,3,0,"primary"),n(l,17,0,"","false"),n(l,19,0,"/assets/icon/shower-solid.svg"),n(l,24,0,"","false"),n(l,26,0,"thermometer"),n(l,31,0,"","false"),n(l,33,0,"/assets/icon/smile-regular.svg"),n(l,40,0,"notifications"),n(l,47,0,t.data.user.allowNotifications),n(l,52,0,"","false"),n(l,54,0,"trash"),n(l,59,0,"","false"),n(l,61,0,"help-circle-outline"),n(l,66,0,"","false"),n(l,68,0,"information-circle-outline")},function(n,l){n(l,44,0,e.yb(l,49).ngClassUntouched,e.yb(l,49).ngClassTouched,e.yb(l,49).ngClassPristine,e.yb(l,49).ngClassDirty,e.yb(l,49).ngClassValid,e.yb(l,49).ngClassInvalid,e.yb(l,49).ngClassPending)})}function k(n){return e.Eb(0,[(n()(),e.pb(0,0,null,null,1,"app-settings",[],null,null,null,v,g)),e.ob(1,114688,null,0,c,[u.Ib,u.a,f.a,m.a,u.Hb],null,null)],function(n,l){n(l,1,0)},null)}var w=e.lb("app-settings",c,k,{},{},[]),y=t("Ip0R"),C=t("ZYCi");t.d(l,"SettingsPageModuleNgFactory",function(){return D});var D=e.mb(b,[],function(n){return e.vb([e.wb(512,e.j,e.bb,[[8,[p.a,w]],[3,e.j],e.x]),e.wb(4608,y.l,y.k,[e.u,[2,y.r]]),e.wb(4608,h.n,h.n,[]),e.wb(4608,u.b,u.b,[e.z,e.g]),e.wb(4608,u.Hb,u.Hb,[u.b,e.j,e.q,y.c]),e.wb(4608,u.Lb,u.Lb,[u.b,e.j,e.q,y.c]),e.wb(1073742336,y.b,y.b,[]),e.wb(1073742336,h.m,h.m,[]),e.wb(1073742336,h.e,h.e,[]),e.wb(1073742336,u.Eb,u.Eb,[]),e.wb(1073742336,C.n,C.n,[[2,C.t],[2,C.m]]),e.wb(1073742336,b,b,[]),e.wb(1024,C.k,function(){return[[{path:"",component:c}]]},[])])})}}]);