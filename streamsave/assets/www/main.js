(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./node_modules/@ionic/core/dist/esm/es5/build lazy recursive ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$":
/*!*********************************************************************************************************************!*\
  !*** ./node_modules/@ionic/core/dist/esm/es5/build lazy ^\.\/.*\.entry\.js$ include: \.entry\.js$ namespace object ***!
  \*********************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./0jv2gqw7.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/0jv2gqw7.entry.js",
		"common",
		10
	],
	"./0jv2gqw7.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/0jv2gqw7.sc.entry.js",
		"common",
		11
	],
	"./1hlqf399.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/1hlqf399.entry.js",
		"common",
		54
	],
	"./1hlqf399.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/1hlqf399.sc.entry.js",
		"common",
		55
	],
	"./1smtjtrp.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/1smtjtrp.entry.js",
		"common",
		56
	],
	"./1smtjtrp.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/1smtjtrp.sc.entry.js",
		"common",
		57
	],
	"./2fikn3fc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/2fikn3fc.entry.js",
		0,
		"common",
		128
	],
	"./2fikn3fc.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/2fikn3fc.sc.entry.js",
		0,
		"common",
		129
	],
	"./3ul05w05.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/3ul05w05.entry.js",
		"common",
		58
	],
	"./3ul05w05.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/3ul05w05.sc.entry.js",
		"common",
		59
	],
	"./4zh8hiut.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/4zh8hiut.entry.js",
		0,
		"common",
		130
	],
	"./4zh8hiut.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/4zh8hiut.sc.entry.js",
		0,
		"common",
		131
	],
	"./5esrbynz.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/5esrbynz.entry.js",
		"common",
		102
	],
	"./5esrbynz.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/5esrbynz.sc.entry.js",
		"common",
		103
	],
	"./5ptcnpes.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/5ptcnpes.entry.js",
		"common",
		12
	],
	"./5ptcnpes.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/5ptcnpes.sc.entry.js",
		"common",
		13
	],
	"./5pwuvxkr.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/5pwuvxkr.entry.js",
		"common",
		60
	],
	"./5pwuvxkr.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/5pwuvxkr.sc.entry.js",
		"common",
		61
	],
	"./5vxaf0jn.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/5vxaf0jn.entry.js",
		"common",
		62
	],
	"./5vxaf0jn.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/5vxaf0jn.sc.entry.js",
		"common",
		63
	],
	"./6dsdnxyn.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/6dsdnxyn.entry.js",
		"common",
		64
	],
	"./6dsdnxyn.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/6dsdnxyn.sc.entry.js",
		"common",
		65
	],
	"./6kgso7pq.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/6kgso7pq.entry.js",
		"common",
		14
	],
	"./6kgso7pq.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/6kgso7pq.sc.entry.js",
		"common",
		15
	],
	"./6pwd4qif.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/6pwd4qif.entry.js",
		"common",
		104
	],
	"./6pwd4qif.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/6pwd4qif.sc.entry.js",
		"common",
		105
	],
	"./7xggbwe8.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/7xggbwe8.entry.js",
		"common",
		66
	],
	"./7xggbwe8.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/7xggbwe8.sc.entry.js",
		"common",
		67
	],
	"./8odyguue.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/8odyguue.entry.js",
		"common",
		68
	],
	"./8odyguue.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/8odyguue.sc.entry.js",
		"common",
		69
	],
	"./aavh7iu1.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/aavh7iu1.entry.js",
		0,
		"common",
		132
	],
	"./aavh7iu1.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/aavh7iu1.sc.entry.js",
		0,
		"common",
		133
	],
	"./admmxern.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/admmxern.entry.js",
		"common",
		70
	],
	"./admmxern.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/admmxern.sc.entry.js",
		"common",
		71
	],
	"./apfh3flu.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/apfh3flu.entry.js",
		"common",
		16
	],
	"./apfh3flu.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/apfh3flu.sc.entry.js",
		"common",
		17
	],
	"./bngjpe45.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/bngjpe45.entry.js",
		"common",
		18
	],
	"./bngjpe45.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/bngjpe45.sc.entry.js",
		"common",
		19
	],
	"./cwd9g9my.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/cwd9g9my.entry.js",
		"common",
		100
	],
	"./cwd9g9my.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/cwd9g9my.sc.entry.js",
		"common",
		101
	],
	"./dsb5jv5r.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/dsb5jv5r.entry.js",
		"common",
		20
	],
	"./dsb5jv5r.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/dsb5jv5r.sc.entry.js",
		"common",
		21
	],
	"./ejapjnva.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ejapjnva.entry.js",
		"common",
		72
	],
	"./ejapjnva.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ejapjnva.sc.entry.js",
		"common",
		73
	],
	"./fuq8m3zo.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/fuq8m3zo.entry.js",
		"common",
		22
	],
	"./fuq8m3zo.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/fuq8m3zo.sc.entry.js",
		"common",
		23
	],
	"./fwzyk2t9.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/fwzyk2t9.entry.js",
		"common",
		24
	],
	"./fwzyk2t9.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/fwzyk2t9.sc.entry.js",
		"common",
		25
	],
	"./g7y3qohv.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/g7y3qohv.entry.js",
		0,
		"common",
		136
	],
	"./g7y3qohv.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/g7y3qohv.sc.entry.js",
		0,
		"common",
		137
	],
	"./gbcxupo7.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/gbcxupo7.entry.js",
		"common",
		74
	],
	"./gbcxupo7.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/gbcxupo7.sc.entry.js",
		"common",
		75
	],
	"./gtqqbhae.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/gtqqbhae.entry.js",
		"common",
		26
	],
	"./gtqqbhae.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/gtqqbhae.sc.entry.js",
		"common",
		27
	],
	"./hdjqcfvf.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/hdjqcfvf.entry.js",
		"common",
		28
	],
	"./hdjqcfvf.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/hdjqcfvf.sc.entry.js",
		"common",
		29
	],
	"./helxzsef.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/helxzsef.entry.js",
		138
	],
	"./helxzsef.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/helxzsef.sc.entry.js",
		139
	],
	"./hg9mfbbd.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/hg9mfbbd.entry.js",
		"common",
		76
	],
	"./hg9mfbbd.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/hg9mfbbd.sc.entry.js",
		"common",
		77
	],
	"./hqq2qdqe.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/hqq2qdqe.entry.js",
		0,
		"common",
		140
	],
	"./hqq2qdqe.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/hqq2qdqe.sc.entry.js",
		0,
		"common",
		141
	],
	"./i5bu78vq.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/i5bu78vq.entry.js",
		"common",
		78
	],
	"./i5bu78vq.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/i5bu78vq.sc.entry.js",
		"common",
		79
	],
	"./ibsc94yw.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ibsc94yw.entry.js",
		"common",
		106
	],
	"./ibsc94yw.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ibsc94yw.sc.entry.js",
		"common",
		107
	],
	"./ipk81gk6.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ipk81gk6.entry.js",
		142
	],
	"./ipk81gk6.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ipk81gk6.sc.entry.js",
		143
	],
	"./iqlhkurd.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/iqlhkurd.entry.js",
		"common",
		80
	],
	"./iqlhkurd.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/iqlhkurd.sc.entry.js",
		"common",
		81
	],
	"./isuxxasv.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/isuxxasv.entry.js",
		"common",
		82
	],
	"./isuxxasv.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/isuxxasv.sc.entry.js",
		"common",
		83
	],
	"./j241fzpw.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/j241fzpw.entry.js",
		"common",
		30
	],
	"./j241fzpw.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/j241fzpw.sc.entry.js",
		"common",
		31
	],
	"./j6a9duez.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/j6a9duez.entry.js",
		"common",
		32
	],
	"./j6a9duez.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/j6a9duez.sc.entry.js",
		"common",
		33
	],
	"./j9orjvxv.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/j9orjvxv.entry.js",
		"common",
		112
	],
	"./j9orjvxv.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/j9orjvxv.sc.entry.js",
		"common",
		113
	],
	"./j9sczdb9.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/j9sczdb9.entry.js",
		"common",
		34
	],
	"./j9sczdb9.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/j9sczdb9.sc.entry.js",
		"common",
		35
	],
	"./jdmqrxbv.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/jdmqrxbv.entry.js",
		"common",
		36
	],
	"./jdmqrxbv.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/jdmqrxbv.sc.entry.js",
		"common",
		37
	],
	"./jpkvsu5y.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/jpkvsu5y.entry.js",
		"common",
		114
	],
	"./jpkvsu5y.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/jpkvsu5y.sc.entry.js",
		"common",
		115
	],
	"./k4hoilf4.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/k4hoilf4.entry.js",
		"common",
		84
	],
	"./k4hoilf4.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/k4hoilf4.sc.entry.js",
		"common",
		85
	],
	"./ka5tcqxv.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ka5tcqxv.entry.js",
		0,
		"common",
		144
	],
	"./ka5tcqxv.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ka5tcqxv.sc.entry.js",
		0,
		"common",
		145
	],
	"./ksgex3rj.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ksgex3rj.entry.js",
		"common",
		38
	],
	"./ksgex3rj.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ksgex3rj.sc.entry.js",
		"common",
		39
	],
	"./kwsaahen.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/kwsaahen.entry.js",
		2,
		"common",
		146
	],
	"./kwsaahen.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/kwsaahen.sc.entry.js",
		2,
		"common",
		147
	],
	"./mri9bdlj.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/mri9bdlj.entry.js",
		148
	],
	"./mri9bdlj.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/mri9bdlj.sc.entry.js",
		149
	],
	"./okzvvz1s.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/okzvvz1s.entry.js",
		"common",
		40
	],
	"./okzvvz1s.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/okzvvz1s.sc.entry.js",
		"common",
		41
	],
	"./omfdyboy.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/omfdyboy.entry.js",
		"common",
		116
	],
	"./omfdyboy.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/omfdyboy.sc.entry.js",
		"common",
		117
	],
	"./oopkmdhe.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/oopkmdhe.entry.js",
		0,
		"common",
		108
	],
	"./oopkmdhe.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/oopkmdhe.sc.entry.js",
		0,
		"common",
		109
	],
	"./paaaniyp.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/paaaniyp.entry.js",
		"common",
		118
	],
	"./paaaniyp.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/paaaniyp.sc.entry.js",
		"common",
		119
	],
	"./pcvyposn.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/pcvyposn.entry.js",
		"common",
		42
	],
	"./pcvyposn.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/pcvyposn.sc.entry.js",
		"common",
		43
	],
	"./qcbg1abo.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qcbg1abo.entry.js",
		"common",
		120
	],
	"./qcbg1abo.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qcbg1abo.sc.entry.js",
		"common",
		121
	],
	"./qjwxr7dv.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qjwxr7dv.entry.js",
		"common",
		44
	],
	"./qjwxr7dv.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qjwxr7dv.sc.entry.js",
		"common",
		45
	],
	"./qmw4agos.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qmw4agos.entry.js",
		0,
		"common",
		150
	],
	"./qmw4agos.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qmw4agos.sc.entry.js",
		0,
		"common",
		151
	],
	"./qoe6pe8v.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qoe6pe8v.entry.js",
		"common",
		46
	],
	"./qoe6pe8v.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qoe6pe8v.sc.entry.js",
		"common",
		47
	],
	"./qqusykhh.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qqusykhh.entry.js",
		"common",
		86
	],
	"./qqusykhh.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qqusykhh.sc.entry.js",
		"common",
		87
	],
	"./qutdmiwk.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qutdmiwk.entry.js",
		0,
		"common",
		152
	],
	"./qutdmiwk.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/qutdmiwk.sc.entry.js",
		0,
		"common",
		153
	],
	"./rcclotvr.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/rcclotvr.entry.js",
		2,
		"common",
		154
	],
	"./rcclotvr.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/rcclotvr.sc.entry.js",
		2,
		"common",
		155
	],
	"./rkecsmgc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/rkecsmgc.entry.js",
		"common",
		122
	],
	"./rkecsmgc.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/rkecsmgc.sc.entry.js",
		"common",
		123
	],
	"./rrpxfm2a.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/rrpxfm2a.entry.js",
		156
	],
	"./rrpxfm2a.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/rrpxfm2a.sc.entry.js",
		157
	],
	"./rvwuhvz4.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/rvwuhvz4.entry.js",
		0,
		"common",
		158
	],
	"./rvwuhvz4.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/rvwuhvz4.sc.entry.js",
		0,
		"common",
		159
	],
	"./tlbladaf.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/tlbladaf.entry.js",
		"common",
		48
	],
	"./tlbladaf.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/tlbladaf.sc.entry.js",
		"common",
		49
	],
	"./tsx41s3c.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/tsx41s3c.entry.js",
		"common",
		50
	],
	"./tsx41s3c.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/tsx41s3c.sc.entry.js",
		"common",
		51
	],
	"./txpe5bol.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/txpe5bol.entry.js",
		"common",
		88
	],
	"./txpe5bol.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/txpe5bol.sc.entry.js",
		"common",
		89
	],
	"./vhwyavqm.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/vhwyavqm.entry.js",
		"common",
		52
	],
	"./vhwyavqm.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/vhwyavqm.sc.entry.js",
		"common",
		53
	],
	"./vnwnpb93.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/vnwnpb93.entry.js",
		"common",
		124
	],
	"./vnwnpb93.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/vnwnpb93.sc.entry.js",
		"common",
		125
	],
	"./w6supv7p.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/w6supv7p.entry.js",
		"common",
		90
	],
	"./w6supv7p.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/w6supv7p.sc.entry.js",
		"common",
		91
	],
	"./wjdsdnuu.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/wjdsdnuu.entry.js",
		"common",
		92
	],
	"./wjdsdnuu.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/wjdsdnuu.sc.entry.js",
		"common",
		93
	],
	"./wpzpc9xw.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/wpzpc9xw.entry.js",
		0,
		"common",
		110
	],
	"./wpzpc9xw.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/wpzpc9xw.sc.entry.js",
		0,
		"common",
		111
	],
	"./xrssylnk.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/xrssylnk.entry.js",
		0,
		"common",
		160
	],
	"./xrssylnk.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/xrssylnk.sc.entry.js",
		0,
		"common",
		161
	],
	"./ylecf5ox.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ylecf5ox.entry.js",
		"common",
		94
	],
	"./ylecf5ox.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ylecf5ox.sc.entry.js",
		"common",
		95
	],
	"./yu8fzdyg.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/yu8fzdyg.entry.js",
		0,
		"common",
		162
	],
	"./yu8fzdyg.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/yu8fzdyg.sc.entry.js",
		0,
		"common",
		163
	],
	"./yxoiyuhs.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/yxoiyuhs.entry.js",
		"common",
		96
	],
	"./yxoiyuhs.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/yxoiyuhs.sc.entry.js",
		"common",
		97
	],
	"./zc63qizl.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/zc63qizl.entry.js",
		"common",
		98
	],
	"./zc63qizl.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/zc63qizl.sc.entry.js",
		"common",
		99
	],
	"./ziv0mko0.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ziv0mko0.entry.js",
		"common",
		126
	],
	"./ziv0mko0.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/ziv0mko0.sc.entry.js",
		"common",
		127
	],
	"./zxjlzr69.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/zxjlzr69.entry.js",
		0,
		"common",
		164
	],
	"./zxjlzr69.sc.entry.js": [
		"./node_modules/@ionic/core/dist/esm/es5/build/zxjlzr69.sc.entry.js",
		0,
		"common",
		165
	]
};
function webpackAsyncContext(req) {
	var ids = map[req];
	if(!ids) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}
	return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {
		var id = ids[0];
		return __webpack_require__(id);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./node_modules/@ionic/core/dist/esm/es5/build lazy recursive ^\\.\\/.*\\.entry\\.js$ include: \\.entry\\.js$";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./node_modules/moment/locale sync recursive ^\\.\\/.*$":
/*!**************************************************!*\
  !*** ./node_modules/moment/locale sync ^\.\/.*$ ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "./node_modules/moment/locale/af.js",
	"./af.js": "./node_modules/moment/locale/af.js",
	"./ar": "./node_modules/moment/locale/ar.js",
	"./ar-dz": "./node_modules/moment/locale/ar-dz.js",
	"./ar-dz.js": "./node_modules/moment/locale/ar-dz.js",
	"./ar-kw": "./node_modules/moment/locale/ar-kw.js",
	"./ar-kw.js": "./node_modules/moment/locale/ar-kw.js",
	"./ar-ly": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ly.js": "./node_modules/moment/locale/ar-ly.js",
	"./ar-ma": "./node_modules/moment/locale/ar-ma.js",
	"./ar-ma.js": "./node_modules/moment/locale/ar-ma.js",
	"./ar-sa": "./node_modules/moment/locale/ar-sa.js",
	"./ar-sa.js": "./node_modules/moment/locale/ar-sa.js",
	"./ar-tn": "./node_modules/moment/locale/ar-tn.js",
	"./ar-tn.js": "./node_modules/moment/locale/ar-tn.js",
	"./ar.js": "./node_modules/moment/locale/ar.js",
	"./az": "./node_modules/moment/locale/az.js",
	"./az.js": "./node_modules/moment/locale/az.js",
	"./be": "./node_modules/moment/locale/be.js",
	"./be.js": "./node_modules/moment/locale/be.js",
	"./bg": "./node_modules/moment/locale/bg.js",
	"./bg.js": "./node_modules/moment/locale/bg.js",
	"./bm": "./node_modules/moment/locale/bm.js",
	"./bm.js": "./node_modules/moment/locale/bm.js",
	"./bn": "./node_modules/moment/locale/bn.js",
	"./bn.js": "./node_modules/moment/locale/bn.js",
	"./bo": "./node_modules/moment/locale/bo.js",
	"./bo.js": "./node_modules/moment/locale/bo.js",
	"./br": "./node_modules/moment/locale/br.js",
	"./br.js": "./node_modules/moment/locale/br.js",
	"./bs": "./node_modules/moment/locale/bs.js",
	"./bs.js": "./node_modules/moment/locale/bs.js",
	"./ca": "./node_modules/moment/locale/ca.js",
	"./ca.js": "./node_modules/moment/locale/ca.js",
	"./cs": "./node_modules/moment/locale/cs.js",
	"./cs.js": "./node_modules/moment/locale/cs.js",
	"./cv": "./node_modules/moment/locale/cv.js",
	"./cv.js": "./node_modules/moment/locale/cv.js",
	"./cy": "./node_modules/moment/locale/cy.js",
	"./cy.js": "./node_modules/moment/locale/cy.js",
	"./da": "./node_modules/moment/locale/da.js",
	"./da.js": "./node_modules/moment/locale/da.js",
	"./de": "./node_modules/moment/locale/de.js",
	"./de-at": "./node_modules/moment/locale/de-at.js",
	"./de-at.js": "./node_modules/moment/locale/de-at.js",
	"./de-ch": "./node_modules/moment/locale/de-ch.js",
	"./de-ch.js": "./node_modules/moment/locale/de-ch.js",
	"./de.js": "./node_modules/moment/locale/de.js",
	"./dv": "./node_modules/moment/locale/dv.js",
	"./dv.js": "./node_modules/moment/locale/dv.js",
	"./el": "./node_modules/moment/locale/el.js",
	"./el.js": "./node_modules/moment/locale/el.js",
	"./en-SG": "./node_modules/moment/locale/en-SG.js",
	"./en-SG.js": "./node_modules/moment/locale/en-SG.js",
	"./en-au": "./node_modules/moment/locale/en-au.js",
	"./en-au.js": "./node_modules/moment/locale/en-au.js",
	"./en-ca": "./node_modules/moment/locale/en-ca.js",
	"./en-ca.js": "./node_modules/moment/locale/en-ca.js",
	"./en-gb": "./node_modules/moment/locale/en-gb.js",
	"./en-gb.js": "./node_modules/moment/locale/en-gb.js",
	"./en-ie": "./node_modules/moment/locale/en-ie.js",
	"./en-ie.js": "./node_modules/moment/locale/en-ie.js",
	"./en-il": "./node_modules/moment/locale/en-il.js",
	"./en-il.js": "./node_modules/moment/locale/en-il.js",
	"./en-nz": "./node_modules/moment/locale/en-nz.js",
	"./en-nz.js": "./node_modules/moment/locale/en-nz.js",
	"./eo": "./node_modules/moment/locale/eo.js",
	"./eo.js": "./node_modules/moment/locale/eo.js",
	"./es": "./node_modules/moment/locale/es.js",
	"./es-do": "./node_modules/moment/locale/es-do.js",
	"./es-do.js": "./node_modules/moment/locale/es-do.js",
	"./es-us": "./node_modules/moment/locale/es-us.js",
	"./es-us.js": "./node_modules/moment/locale/es-us.js",
	"./es.js": "./node_modules/moment/locale/es.js",
	"./et": "./node_modules/moment/locale/et.js",
	"./et.js": "./node_modules/moment/locale/et.js",
	"./eu": "./node_modules/moment/locale/eu.js",
	"./eu.js": "./node_modules/moment/locale/eu.js",
	"./fa": "./node_modules/moment/locale/fa.js",
	"./fa.js": "./node_modules/moment/locale/fa.js",
	"./fi": "./node_modules/moment/locale/fi.js",
	"./fi.js": "./node_modules/moment/locale/fi.js",
	"./fo": "./node_modules/moment/locale/fo.js",
	"./fo.js": "./node_modules/moment/locale/fo.js",
	"./fr": "./node_modules/moment/locale/fr.js",
	"./fr-ca": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ca.js": "./node_modules/moment/locale/fr-ca.js",
	"./fr-ch": "./node_modules/moment/locale/fr-ch.js",
	"./fr-ch.js": "./node_modules/moment/locale/fr-ch.js",
	"./fr.js": "./node_modules/moment/locale/fr.js",
	"./fy": "./node_modules/moment/locale/fy.js",
	"./fy.js": "./node_modules/moment/locale/fy.js",
	"./ga": "./node_modules/moment/locale/ga.js",
	"./ga.js": "./node_modules/moment/locale/ga.js",
	"./gd": "./node_modules/moment/locale/gd.js",
	"./gd.js": "./node_modules/moment/locale/gd.js",
	"./gl": "./node_modules/moment/locale/gl.js",
	"./gl.js": "./node_modules/moment/locale/gl.js",
	"./gom-latn": "./node_modules/moment/locale/gom-latn.js",
	"./gom-latn.js": "./node_modules/moment/locale/gom-latn.js",
	"./gu": "./node_modules/moment/locale/gu.js",
	"./gu.js": "./node_modules/moment/locale/gu.js",
	"./he": "./node_modules/moment/locale/he.js",
	"./he.js": "./node_modules/moment/locale/he.js",
	"./hi": "./node_modules/moment/locale/hi.js",
	"./hi.js": "./node_modules/moment/locale/hi.js",
	"./hr": "./node_modules/moment/locale/hr.js",
	"./hr.js": "./node_modules/moment/locale/hr.js",
	"./hu": "./node_modules/moment/locale/hu.js",
	"./hu.js": "./node_modules/moment/locale/hu.js",
	"./hy-am": "./node_modules/moment/locale/hy-am.js",
	"./hy-am.js": "./node_modules/moment/locale/hy-am.js",
	"./id": "./node_modules/moment/locale/id.js",
	"./id.js": "./node_modules/moment/locale/id.js",
	"./is": "./node_modules/moment/locale/is.js",
	"./is.js": "./node_modules/moment/locale/is.js",
	"./it": "./node_modules/moment/locale/it.js",
	"./it-ch": "./node_modules/moment/locale/it-ch.js",
	"./it-ch.js": "./node_modules/moment/locale/it-ch.js",
	"./it.js": "./node_modules/moment/locale/it.js",
	"./ja": "./node_modules/moment/locale/ja.js",
	"./ja.js": "./node_modules/moment/locale/ja.js",
	"./jv": "./node_modules/moment/locale/jv.js",
	"./jv.js": "./node_modules/moment/locale/jv.js",
	"./ka": "./node_modules/moment/locale/ka.js",
	"./ka.js": "./node_modules/moment/locale/ka.js",
	"./kk": "./node_modules/moment/locale/kk.js",
	"./kk.js": "./node_modules/moment/locale/kk.js",
	"./km": "./node_modules/moment/locale/km.js",
	"./km.js": "./node_modules/moment/locale/km.js",
	"./kn": "./node_modules/moment/locale/kn.js",
	"./kn.js": "./node_modules/moment/locale/kn.js",
	"./ko": "./node_modules/moment/locale/ko.js",
	"./ko.js": "./node_modules/moment/locale/ko.js",
	"./ku": "./node_modules/moment/locale/ku.js",
	"./ku.js": "./node_modules/moment/locale/ku.js",
	"./ky": "./node_modules/moment/locale/ky.js",
	"./ky.js": "./node_modules/moment/locale/ky.js",
	"./lb": "./node_modules/moment/locale/lb.js",
	"./lb.js": "./node_modules/moment/locale/lb.js",
	"./lo": "./node_modules/moment/locale/lo.js",
	"./lo.js": "./node_modules/moment/locale/lo.js",
	"./lt": "./node_modules/moment/locale/lt.js",
	"./lt.js": "./node_modules/moment/locale/lt.js",
	"./lv": "./node_modules/moment/locale/lv.js",
	"./lv.js": "./node_modules/moment/locale/lv.js",
	"./me": "./node_modules/moment/locale/me.js",
	"./me.js": "./node_modules/moment/locale/me.js",
	"./mi": "./node_modules/moment/locale/mi.js",
	"./mi.js": "./node_modules/moment/locale/mi.js",
	"./mk": "./node_modules/moment/locale/mk.js",
	"./mk.js": "./node_modules/moment/locale/mk.js",
	"./ml": "./node_modules/moment/locale/ml.js",
	"./ml.js": "./node_modules/moment/locale/ml.js",
	"./mn": "./node_modules/moment/locale/mn.js",
	"./mn.js": "./node_modules/moment/locale/mn.js",
	"./mr": "./node_modules/moment/locale/mr.js",
	"./mr.js": "./node_modules/moment/locale/mr.js",
	"./ms": "./node_modules/moment/locale/ms.js",
	"./ms-my": "./node_modules/moment/locale/ms-my.js",
	"./ms-my.js": "./node_modules/moment/locale/ms-my.js",
	"./ms.js": "./node_modules/moment/locale/ms.js",
	"./mt": "./node_modules/moment/locale/mt.js",
	"./mt.js": "./node_modules/moment/locale/mt.js",
	"./my": "./node_modules/moment/locale/my.js",
	"./my.js": "./node_modules/moment/locale/my.js",
	"./nb": "./node_modules/moment/locale/nb.js",
	"./nb.js": "./node_modules/moment/locale/nb.js",
	"./ne": "./node_modules/moment/locale/ne.js",
	"./ne.js": "./node_modules/moment/locale/ne.js",
	"./nl": "./node_modules/moment/locale/nl.js",
	"./nl-be": "./node_modules/moment/locale/nl-be.js",
	"./nl-be.js": "./node_modules/moment/locale/nl-be.js",
	"./nl.js": "./node_modules/moment/locale/nl.js",
	"./nn": "./node_modules/moment/locale/nn.js",
	"./nn.js": "./node_modules/moment/locale/nn.js",
	"./pa-in": "./node_modules/moment/locale/pa-in.js",
	"./pa-in.js": "./node_modules/moment/locale/pa-in.js",
	"./pl": "./node_modules/moment/locale/pl.js",
	"./pl.js": "./node_modules/moment/locale/pl.js",
	"./pt": "./node_modules/moment/locale/pt.js",
	"./pt-br": "./node_modules/moment/locale/pt-br.js",
	"./pt-br.js": "./node_modules/moment/locale/pt-br.js",
	"./pt.js": "./node_modules/moment/locale/pt.js",
	"./ro": "./node_modules/moment/locale/ro.js",
	"./ro.js": "./node_modules/moment/locale/ro.js",
	"./ru": "./node_modules/moment/locale/ru.js",
	"./ru.js": "./node_modules/moment/locale/ru.js",
	"./sd": "./node_modules/moment/locale/sd.js",
	"./sd.js": "./node_modules/moment/locale/sd.js",
	"./se": "./node_modules/moment/locale/se.js",
	"./se.js": "./node_modules/moment/locale/se.js",
	"./si": "./node_modules/moment/locale/si.js",
	"./si.js": "./node_modules/moment/locale/si.js",
	"./sk": "./node_modules/moment/locale/sk.js",
	"./sk.js": "./node_modules/moment/locale/sk.js",
	"./sl": "./node_modules/moment/locale/sl.js",
	"./sl.js": "./node_modules/moment/locale/sl.js",
	"./sq": "./node_modules/moment/locale/sq.js",
	"./sq.js": "./node_modules/moment/locale/sq.js",
	"./sr": "./node_modules/moment/locale/sr.js",
	"./sr-cyrl": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "./node_modules/moment/locale/sr-cyrl.js",
	"./sr.js": "./node_modules/moment/locale/sr.js",
	"./ss": "./node_modules/moment/locale/ss.js",
	"./ss.js": "./node_modules/moment/locale/ss.js",
	"./sv": "./node_modules/moment/locale/sv.js",
	"./sv.js": "./node_modules/moment/locale/sv.js",
	"./sw": "./node_modules/moment/locale/sw.js",
	"./sw.js": "./node_modules/moment/locale/sw.js",
	"./ta": "./node_modules/moment/locale/ta.js",
	"./ta.js": "./node_modules/moment/locale/ta.js",
	"./te": "./node_modules/moment/locale/te.js",
	"./te.js": "./node_modules/moment/locale/te.js",
	"./tet": "./node_modules/moment/locale/tet.js",
	"./tet.js": "./node_modules/moment/locale/tet.js",
	"./tg": "./node_modules/moment/locale/tg.js",
	"./tg.js": "./node_modules/moment/locale/tg.js",
	"./th": "./node_modules/moment/locale/th.js",
	"./th.js": "./node_modules/moment/locale/th.js",
	"./tl-ph": "./node_modules/moment/locale/tl-ph.js",
	"./tl-ph.js": "./node_modules/moment/locale/tl-ph.js",
	"./tlh": "./node_modules/moment/locale/tlh.js",
	"./tlh.js": "./node_modules/moment/locale/tlh.js",
	"./tr": "./node_modules/moment/locale/tr.js",
	"./tr.js": "./node_modules/moment/locale/tr.js",
	"./tzl": "./node_modules/moment/locale/tzl.js",
	"./tzl.js": "./node_modules/moment/locale/tzl.js",
	"./tzm": "./node_modules/moment/locale/tzm.js",
	"./tzm-latn": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm-latn.js": "./node_modules/moment/locale/tzm-latn.js",
	"./tzm.js": "./node_modules/moment/locale/tzm.js",
	"./ug-cn": "./node_modules/moment/locale/ug-cn.js",
	"./ug-cn.js": "./node_modules/moment/locale/ug-cn.js",
	"./uk": "./node_modules/moment/locale/uk.js",
	"./uk.js": "./node_modules/moment/locale/uk.js",
	"./ur": "./node_modules/moment/locale/ur.js",
	"./ur.js": "./node_modules/moment/locale/ur.js",
	"./uz": "./node_modules/moment/locale/uz.js",
	"./uz-latn": "./node_modules/moment/locale/uz-latn.js",
	"./uz-latn.js": "./node_modules/moment/locale/uz-latn.js",
	"./uz.js": "./node_modules/moment/locale/uz.js",
	"./vi": "./node_modules/moment/locale/vi.js",
	"./vi.js": "./node_modules/moment/locale/vi.js",
	"./x-pseudo": "./node_modules/moment/locale/x-pseudo.js",
	"./x-pseudo.js": "./node_modules/moment/locale/x-pseudo.js",
	"./yo": "./node_modules/moment/locale/yo.js",
	"./yo.js": "./node_modules/moment/locale/yo.js",
	"./zh-cn": "./node_modules/moment/locale/zh-cn.js",
	"./zh-cn.js": "./node_modules/moment/locale/zh-cn.js",
	"./zh-hk": "./node_modules/moment/locale/zh-hk.js",
	"./zh-hk.js": "./node_modules/moment/locale/zh-hk.js",
	"./zh-tw": "./node_modules/moment/locale/zh-tw.js",
	"./zh-tw.js": "./node_modules/moment/locale/zh-tw.js"
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) { // check for number or string
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return id;
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "./node_modules/moment/locale sync recursive ^\\.\\/.*$";

/***/ }),

/***/ "./src/$$_lazy_route_resource lazy recursive":
/*!**********************************************************!*\
  !*** ./src/$$_lazy_route_resource lazy namespace object ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./about/about.module": [
		"./src/app/about/about.module.ts",
		"about-about-module"
	],
	"./add-device/add-device.module": [
		"./src/app/add-device/add-device.module.ts"
	],
	"./consumption-ranges/consumption-ranges.module": [
		"./src/app/consumption-ranges/consumption-ranges.module.ts",
		"consumption-ranges-consumption-ranges-module"
	],
	"./details/details.module": [
		"./src/app/details/details.module.ts"
	],
	"./devices/devices.module": [
		"./src/app/devices/devices.module.ts",
		"devices-devices-module"
	],
	"./help/help.module": [
		"./src/app/help/help.module.ts"
	],
	"./home/home.module": [
		"./src/app/home/home.module.ts",
		"home-home-module"
	],
	"./settings/settings.module": [
		"./src/app/settings/settings.module.ts",
		"settings-settings-module"
	],
	"./units/units.module": [
		"./src/app/units/units.module.ts",
		"units-units-module"
	]
};
function webpackAsyncContext(req) {
	var ids = map[req];
	if(!ids) {
		return Promise.resolve().then(function() {
			var e = new Error("Cannot find module '" + req + "'");
			e.code = 'MODULE_NOT_FOUND';
			throw e;
		});
	}
	return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {
		var id = ids[0];
		return __webpack_require__(id);
	});
}
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = "./src/$$_lazy_route_resource lazy recursive";
module.exports = webpackAsyncContext;

/***/ }),

/***/ "./src/app/add-device/add-device.module.ts":
/*!*************************************************!*\
  !*** ./src/app/add-device/add-device.module.ts ***!
  \*************************************************/
/*! exports provided: AddDevicePageModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddDevicePageModule", function() { return AddDevicePageModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _add_device_page__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./add-device.page */ "./src/app/add-device/add-device.page.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






var routes = [
    {
        path: '',
        component: _add_device_page__WEBPACK_IMPORTED_MODULE_5__["AddDevicePage"]
    }
];
var AddDevicePageModule = /** @class */ (function () {
    function AddDevicePageModule() {
    }
    AddDevicePageModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
                _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["IonicModule"],
                _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouterModule"].forChild(routes)
            ],
            declarations: [_add_device_page__WEBPACK_IMPORTED_MODULE_5__["AddDevicePage"]]
        })
    ], AddDevicePageModule);
    return AddDevicePageModule;
}());



/***/ }),

/***/ "./src/app/add-device/add-device.page.html":
/*!*************************************************!*\
  !*** ./src/app/add-device/add-device.page.html ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"back()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title *ngIf=\"!device\">Add device</ion-title>\n    <ion-title *ngIf=\"device\">Edit device</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content padding>\n  <ng-container *ngIf=\"!device\">\n\n    <ion-grid class=\"absoluteCenter\">\n      <ion-row>\n        <ion-col size=\"12\" margin-bottom>\n          <div text-center>\n        <img src=\"assets/icon/shower_down.svg\" alt=\"\" style=\"height: 50vw;\">\n      </div>\n    </ion-col>\n    <ion-col size=\"12\" margin-top>\n      <div text-center>\n        <p>To add new device, open the tap and let the water run so we can discover it.</p>\n      </div>\n    </ion-col>\n  </ion-row>\n</ion-grid>\n</ng-container>\n<ng-container *ngIf=\"device\">\n  <ion-list>\n    <ion-item button detail=\"true\" (click)=\"renameDevice()\">\n        <ion-label text-wrap>Rename device</ion-label>\n        <ion-note *ngIf=\"!device.name\" slot=\"end\">{{ device.id }}</ion-note>\n        <ion-note *ngIf=\"device.name\" slot=\"end\">{{ device.name }}</ion-note>\n    </ion-item>\n    <ion-item button (click)=\"removeDevice()\">\n        <ion-label>Remove device</ion-label>\n    </ion-item>\n\n  </ion-list>\n</ng-container>\n</ion-content>"

/***/ }),

/***/ "./src/app/add-device/add-device.page.scss":
/*!*************************************************!*\
  !*** ./src/app/add-device/add-device.page.scss ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ".absoluteCenter {\n  display: flex !important;\n  justify-content: center !important;\n  align-items: center !important;\n  height: 100%; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYWRkLWRldmljZS9DOlxcd29ya1xcZGV2XFxzdHJlYW1zYXZlL3NyY1xcYXBwXFxhZGQtZGV2aWNlXFxhZGQtZGV2aWNlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNBLHdCQUF3QjtFQUN4QixrQ0FBa0M7RUFDbEMsOEJBQThCO0VBQzlCLFlBQVksRUFBQSIsImZpbGUiOiJzcmMvYXBwL2FkZC1kZXZpY2UvYWRkLWRldmljZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYWJzb2x1dGVDZW50ZXIge1xyXG5kaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XHJcbmp1c3RpZnktY29udGVudDogY2VudGVyICFpbXBvcnRhbnQ7XHJcbmFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcclxuaGVpZ2h0OiAxMDAlO1xyXG59Il19 */"

/***/ }),

/***/ "./src/app/add-device/add-device.page.ts":
/*!***********************************************!*\
  !*** ./src/app/add-device/add-device.page.ts ***!
  \***********************************************/
/*! exports provided: AddDevicePage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddDevicePage", function() { return AddDevicePage; });
/* harmony import */ var _providers_loading__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../../providers/loading */ "./src/providers/loading.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _providers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../providers */ "./src/providers/index.ts");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};





var AddDevicePage = /** @class */ (function () {
    function AddDevicePage(navParams, alertController, toastController, modalController, ble, data, localDb, loading) {
        this.navParams = navParams;
        this.alertController = alertController;
        this.toastController = toastController;
        this.modalController = modalController;
        this.ble = ble;
        this.data = data;
        this.localDb = localDb;
        this.loading = loading;
        this.device = this.navParams.get('device');
        console.log('this.navParams.get(device)', this.device);
    }
    AddDevicePage.prototype.ngOnInit = function () {
        // if (!this.device) {
        //   this.newDeviceSub = this.ble.newDeviceChanged.subscribe(device => {
        //     console.log('newDeviceChanged', device);
        //     this.presentDeviceFoundConfirm(device.id);
        //   });
        // }
    };
    AddDevicePage.prototype.ngOnDestroy = function () {
        this.ble.ble.stopScan();
    };
    AddDevicePage.prototype.ionViewWillLeave = function () {
        console.log('ionViewWillLeave');
        this.ble.ble.stopScan();
        if (this.newDeviceSub) {
            this.newDeviceSub.unsubscribe();
        }
        if (this.timerSub) {
            this.timerSub.unsubscribe();
        }
        this.ble.resetAddDevices();
    };
    AddDevicePage.prototype.ionViewWillEnter = function () {
        var _this = this;
        console.log('ionViewWillEnter');
        if (this.data && this.data.user && this.data.user.devices && this.data.user.devices.length > 0) {
            var userDeviceIds = this.data.user.devices.map(function (item) { return item.id; });
            this.ble.addIdsToDeviceIds(userDeviceIds);
        }
        if (!this.device) {
            this.newDeviceSub = this.ble.newDeviceChanged.subscribe(function (res) {
                console.log('newDeviceChanged', res);
                _this.presentDeviceFoundConfirm(res.advertisementData, res.bleDevice);
            });
            this.timerSub = Object(rxjs__WEBPACK_IMPORTED_MODULE_4__["timer"])(0, 5000).subscribe(function (value) {
                // console.log(value);
                _this.ble.startAddDeviceScan();
            });
            // this.ble.connect(device.id).subscribe(async peripheral => {
            //   console.log('peripheral', peripheral);
            //   const cumulativeData = await this.ble.read(peripheral.id, this.showerDevice.serviceUUID, this.showerDevice.cumulative);
            // this.ble.startAddDeviceScan();
        }
        // TODO: move also presentDeviceFoundConfirm here? it's not always showing
    };
    AddDevicePage.prototype.presentDeviceFoundConfirm = function (device, bleDevice) {
        return __awaiter(this, void 0, void 0, function () {
            var alert;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.alertController.create({
                            header: "Found device " + device.id,
                            message: 'Do you want to add it to the devices to measure',
                            backdropDismiss: false,
                            buttons: [
                                {
                                    text: 'Cancel',
                                    role: 'cancel',
                                    handler: function () {
                                        console.log('cancel clicked');
                                    }
                                }, {
                                    text: 'Add',
                                    handler: function () { return __awaiter(_this, void 0, void 0, function () {
                                        var newDevice;
                                        var _this = this;
                                        return __generator(this, function (_a) {
                                            console.log('add clicked');
                                            if (!this.data.user.devices) {
                                                this.data.user.devices = [];
                                            }
                                            newDevice = {
                                                id: device.id,
                                                name: device.id.toString()
                                            };
                                            this.loading.presentLoading(null, 'Connecting to Streamsave...');
                                            this.ble.ble.connect(bleDevice.id).subscribe(function (peripheral) { return __awaiter(_this, void 0, void 0, function () {
                                                var cumulativeData, parsedCumulativeData, dc, rating, session;
                                                return __generator(this, function (_a) {
                                                    switch (_a.label) {
                                                        case 0:
                                                            if (!peripheral) return [3 /*break*/, 5];
                                                            this.data.user.devices.push(newDevice);
                                                            this.localDb.updateUser(this.data.user);
                                                            return [4 /*yield*/, this.ble.ble.read(peripheral.id, this.ble.showerDevice.serviceUUID, this.ble.showerDevice.cumulative)];
                                                        case 1:
                                                            cumulativeData = _a.sent();
                                                            parsedCumulativeData = this.ble.parseBLEData(cumulativeData);
                                                            // console.log('parsedCumulativeData', parsedCumulativeData);
                                                            return [4 /*yield*/, this.localDb.initPreviousMeasurement(parsedCumulativeData, newDevice.id)];
                                                        case 2:
                                                            // console.log('parsedCumulativeData', parsedCumulativeData);
                                                            _a.sent();
                                                            return [4 /*yield*/, this.localDb.addDeviceClosedMeasurement(newDevice.id)];
                                                        case 3:
                                                            _a.sent();
                                                            return [4 /*yield*/, this.ble.ble.disconnect(peripheral.id)];
                                                        case 4:
                                                            dc = _a.sent();
                                                            console.log('dc', dc);
                                                            rating = {
                                                                emojiColor: "#42B771",
                                                                emojiUrl: "assets/icon/grin-regular.svg",
                                                                progress: 25
                                                            };
                                                            session = {
                                                                runtime: 0,
                                                                temp: 0,
                                                                water: 0,
                                                                id: newDevice.id,
                                                                energy: 0,
                                                                cost: 0,
                                                                gasAmount: 0,
                                                                rating: rating,
                                                            };
                                                            // this.showPreviousSessions.set(id, true);
                                                            this.ble.deviceWasPaused.set(newDevice.id, false);
                                                            this.ble.previousSessions.set(newDevice.id, session);
                                                            this.loading.dismissLoading();
                                                            console.log(this.ble.previousSessions);
                                                            console.log(this.ble.previousSessions.get(newDevice.id));
                                                            this.presentDeviceAddedToast(newDevice.name);
                                                            return [3 /*break*/, 6];
                                                        case 5:
                                                            console.warn('coulnt not connect to device');
                                                            this.loading.dismissLoading();
                                                            _a.label = 6;
                                                        case 6: return [2 /*return*/];
                                                    }
                                                });
                                            }); }, function (error) {
                                                console.warn('error');
                                                _this.loading.dismissLoading();
                                                _this.handleError('Device disconnected unexpectedly');
                                            });
                                            return [2 /*return*/];
                                        });
                                    }); }
                                }
                            ]
                        })];
                    case 1:
                        alert = _a.sent();
                        return [4 /*yield*/, alert.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AddDevicePage.prototype.presentDeviceAddedToast = function (deviceId) {
        return __awaiter(this, void 0, void 0, function () {
            var toast;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.toastController.create({
                            message: deviceId + " added to devices.",
                            duration: 4000
                        })];
                    case 1:
                        toast = _a.sent();
                        toast.present();
                        return [2 /*return*/];
                }
            });
        });
    };
    AddDevicePage.prototype.renameDevice = function () {
        return __awaiter(this, void 0, void 0, function () {
            var alert;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.alertController.create({
                            header: 'Rename device',
                            inputs: [
                                {
                                    name: 'name',
                                    type: 'text',
                                    label: 'test',
                                    value: this.device && this.device.name ? this.device.name : '',
                                    placeholder: 'Device name'
                                },
                            ],
                            buttons: [
                                {
                                    text: 'Cancel',
                                    role: 'cancel',
                                    cssClass: 'secondary',
                                    handler: function () {
                                        console.log('Confirm Cancel');
                                    }
                                }, {
                                    text: 'Ok',
                                    handler: function (data) {
                                        console.log('data.name', data.name);
                                        console.log('Confirm Ok');
                                        var deviceIndex = _this.data.user.devices.findIndex(function (device) { return device.id === _this.device.id; });
                                        _this.data.user.devices[deviceIndex].name = data.name;
                                        _this.device.name = data.name;
                                        _this.localDb.updateUser(_this.data.user);
                                    }
                                }
                            ]
                        })];
                    case 1:
                        alert = _a.sent();
                        return [4 /*yield*/, alert.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AddDevicePage.prototype.removeDevice = function () {
        return __awaiter(this, void 0, void 0, function () {
            var deviceName, alert;
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        deviceName = this.device && this.device.name ? this.device.name : this.device.id;
                        return [4 /*yield*/, this.alertController.create({
                                header: 'Remove device',
                                message: "Do you want to remove device " + deviceName,
                                buttons: [
                                    {
                                        text: 'Cancel',
                                        role: 'cancel',
                                        handler: function () {
                                            console.log('cancel clicked');
                                        }
                                    }, {
                                        text: 'Remove',
                                        handler: function () { return __awaiter(_this, void 0, void 0, function () {
                                            var deviceIndex;
                                            var _this = this;
                                            return __generator(this, function (_a) {
                                                switch (_a.label) {
                                                    case 0:
                                                        console.log('remove clicked');
                                                        deviceIndex = this.data.user.devices.findIndex(function (device) { return device.id === _this.device.id; });
                                                        this.data.user.devices.splice(deviceIndex, 1);
                                                        return [4 /*yield*/, this.localDb.updateUser(this.data.user)];
                                                    case 1:
                                                        _a.sent();
                                                        return [4 /*yield*/, this.localDb.clearMeasurementsByDeviceId(this.device.id, true)];
                                                    case 2:
                                                        _a.sent();
                                                        return [4 /*yield*/, this.localDb.deleteDeviceClosedMeasurement(this.device.id)];
                                                    case 3:
                                                        _a.sent();
                                                        this.back();
                                                        return [2 /*return*/];
                                                }
                                            });
                                        }); }
                                    }
                                ]
                            })];
                    case 1:
                        alert = _a.sent();
                        return [4 /*yield*/, alert.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AddDevicePage.prototype.back = function () {
        this.modalController.dismiss();
    };
    AddDevicePage.prototype.handleError = function (errorMsg) {
        return __awaiter(this, void 0, void 0, function () {
            var alert;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.alertController.create({
                            header: 'Something went wrong',
                            subHeader: errorMsg,
                            message: 'If the problem persists, try restarting the app and switching bluetooth off and on again.',
                            buttons: ['OK']
                        })];
                    case 1:
                        alert = _a.sent();
                        return [4 /*yield*/, alert.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    AddDevicePage = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'app-add-device',
            template: __webpack_require__(/*! ./add-device.page.html */ "./src/app/add-device/add-device.page.html"),
            styles: [__webpack_require__(/*! ./add-device.page.scss */ "./src/app/add-device/add-device.page.scss")]
        }),
        __metadata("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_2__["NavParams"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["AlertController"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ToastController"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ModalController"],
            _providers__WEBPACK_IMPORTED_MODULE_3__["BLEProvider"],
            _providers__WEBPACK_IMPORTED_MODULE_3__["DataProvider"],
            _providers__WEBPACK_IMPORTED_MODULE_3__["LocalDatabaseProvider"],
            _providers_loading__WEBPACK_IMPORTED_MODULE_0__["LoadingProvider"]])
    ], AddDevicePage);
    return AddDevicePage;
}());



/***/ }),

/***/ "./src/app/app-routing.module.ts":
/*!***************************************!*\
  !*** ./src/app/app-routing.module.ts ***!
  \***************************************/
/*! exports provided: AppRoutingModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppRoutingModule", function() { return AppRoutingModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


// import { AuthGuard } from './auth.guard';
var routes = [
    { path: '', redirectTo: 'home', pathMatch: 'full', },
    { path: 'home', loadChildren: './home/home.module#HomePageModule', },
    { path: 'details', loadChildren: './details/details.module#DetailsPageModule', },
    { path: 'settings', loadChildren: './settings/settings.module#SettingsPageModule', },
    // { path: 'login', loadChildren: './login/login.module#LoginPageModule', },
    // { path: 'signup', loadChildren: './signup/signup.module#SignupPageModule', },
    { path: 'settings/devices', loadChildren: './devices/devices.module#DevicesPageModule', },
    { path: 'settings/add-device', loadChildren: './add-device/add-device.module#AddDevicePageModule', },
    { path: 'settings/units', loadChildren: './units/units.module#UnitsPageModule', },
    { path: 'settings/about', loadChildren: './about/about.module#AboutPageModule', },
    { path: 'settings/consumption-ranges', loadChildren: './consumption-ranges/consumption-ranges.module#ConsumptionRangesPageModule', },
    { path: 'help', loadChildren: './help/help.module#HelpPageModule' },
];
var AppRoutingModule = /** @class */ (function () {
    function AppRoutingModule() {
    }
    AppRoutingModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [_angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"].forRoot(routes)],
            exports: [_angular_router__WEBPACK_IMPORTED_MODULE_1__["RouterModule"]]
        })
    ], AppRoutingModule);
    return AppRoutingModule;
}());



/***/ }),

/***/ "./src/app/app.component.html":
/*!************************************!*\
  !*** ./src/app/app.component.html ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ion-app>\n  <ion-router-outlet></ion-router-outlet>\n</ion-app>\n"

/***/ }),

/***/ "./src/app/app.component.ts":
/*!**********************************!*\
  !*** ./src/app/app.component.ts ***!
  \**********************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppComponent", function() { return AppComponent; });
/* harmony import */ var _providers_localdb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../providers/localdb */ "./src/providers/localdb.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _ionic_native_splash_screen_ngx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic-native/splash-screen/ngx */ "./node_modules/@ionic-native/splash-screen/ngx/index.js");
/* harmony import */ var _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic-native/status-bar/ngx */ "./node_modules/@ionic-native/status-bar/ngx/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var AppComponent = /** @class */ (function () {
    function AppComponent(platform, splashScreen, statusBar, 
    // private afAuth: AngularFireAuth,
    navCtrl, localDb) {
        this.platform = platform;
        this.splashScreen = splashScreen;
        this.statusBar = statusBar;
        this.navCtrl = navCtrl;
        this.localDb = localDb;
        this.initializeApp();
        // const authObserver = afAuth.authState.subscribe(user => {
        //   if (user) {
        //     this.navCtrl.navigateRoot('/home');
        //   } else {
        //     this.navCtrl.navigateRoot('/login');
        //   }
        // });
    }
    AppComponent.prototype.initializeApp = function () {
        var _this = this;
        this.platform.ready().then(function () {
            _this.localDb.init();
            _this.statusBar.styleDefault();
            _this.splashScreen.hide();
            _this.statusBar.overlaysWebView(false);
            _this.statusBar.backgroundColorByHexString('#000000');
            _this.navCtrl.navigateRoot('/home');
        });
    };
    AppComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Component"])({
            selector: 'app-root',
            template: __webpack_require__(/*! ./app.component.html */ "./src/app/app.component.html")
        }),
        __metadata("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_2__["Platform"],
            _ionic_native_splash_screen_ngx__WEBPACK_IMPORTED_MODULE_3__["SplashScreen"],
            _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_4__["StatusBar"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["NavController"],
            _providers_localdb__WEBPACK_IMPORTED_MODULE_0__["LocalDatabaseProvider"]])
    ], AppComponent);
    return AppComponent;
}());



/***/ }),

/***/ "./src/app/app.module.ts":
/*!*******************************!*\
  !*** ./src/app/app.module.ts ***!
  \*******************************/
/*! exports provided: AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AppModule", function() { return AppModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app.component */ "./src/app/app.component.ts");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/platform-browser/animations */ "./node_modules/@angular/platform-browser/fesm5/animations.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _app_routing_module__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./app-routing.module */ "./src/app/app-routing.module.ts");
/* harmony import */ var _ionic_native_splash_screen_ngx__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @ionic-native/splash-screen/ngx */ "./node_modules/@ionic-native/splash-screen/ngx/index.js");
/* harmony import */ var _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @ionic-native/status-bar/ngx */ "./node_modules/@ionic-native/status-bar/ngx/index.js");
/* harmony import */ var _ionic_native_ble_ngx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ionic-native/ble/ngx */ "./node_modules/@ionic-native/ble/ngx/index.js");
/* harmony import */ var _ionic_native_open_native_settings_ngx__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @ionic-native/open-native-settings/ngx */ "./node_modules/@ionic-native/open-native-settings/ngx/index.js");
/* harmony import */ var _ionic_native_native_storage_ngx__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @ionic-native/native-storage/ngx */ "./node_modules/@ionic-native/native-storage/ngx/index.js");
/* harmony import */ var _ionic_native_app_version_ngx__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ionic-native/app-version/ngx */ "./node_modules/@ionic-native/app-version/ngx/index.js");
/* harmony import */ var _ionic_native_local_notifications_ngx__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @ionic-native/local-notifications/ngx */ "./node_modules/@ionic-native/local-notifications/ngx/index.js");
/* harmony import */ var _providers__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../providers */ "./src/providers/index.ts");
/* harmony import */ var _modules_ion_bottom_drawer_ion_bottom_drawer_module__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../modules/ion-bottom-drawer/ion-bottom-drawer.module */ "./src/modules/ion-bottom-drawer/ion-bottom-drawer.module.ts");
/* harmony import */ var ngx_daterangepicker_material__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ngx-daterangepicker-material */ "./node_modules/ngx-daterangepicker-material/fesm5/ngx-daterangepicker-material.js");
/* harmony import */ var _details_details_module__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./details/details.module */ "./src/app/details/details.module.ts");
/* harmony import */ var _add_device_add_device_module__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./add-device/add-device.module */ "./src/app/add-device/add-device.module.ts");
/* harmony import */ var _help_help_module__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./help/help.module */ "./src/app/help/help.module.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
// CORE






// ROUTING


// NATIVE







// PROVIDERS

// LIBS
// import { AngularFireModule } from 'angularfire2';
// import { AngularFirestoreModule } from 'angularfire2/firestore';
// import { AngularFireAuthModule } from 'angularfire2/auth';
// import { ChartsModule } from 'ng2-charts';

// import { IonBottomDrawerModule } from 'ion-bottom-drawer';

// MODALS



var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            declarations: [_app_component__WEBPACK_IMPORTED_MODULE_3__["AppComponent"]],
            entryComponents: [],
            imports: [
                _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__["BrowserModule"],
                _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["IonicModule"].forRoot(),
                _app_routing_module__WEBPACK_IMPORTED_MODULE_7__["AppRoutingModule"],
                // AngularFireModule.initializeApp(environment.firebase),
                // AngularFirestoreModule,
                // AngularFireAuthModule,
                _angular_forms__WEBPACK_IMPORTED_MODULE_4__["FormsModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_4__["ReactiveFormsModule"],
                _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_5__["BrowserAnimationsModule"],
                // ChartsModule,
                _modules_ion_bottom_drawer_ion_bottom_drawer_module__WEBPACK_IMPORTED_MODULE_16__["IonBottomDrawerModule"],
                ngx_daterangepicker_material__WEBPACK_IMPORTED_MODULE_17__["NgxDaterangepickerMd"],
                // AngularFireAuth,
                _details_details_module__WEBPACK_IMPORTED_MODULE_18__["DetailsPageModule"],
                _add_device_add_device_module__WEBPACK_IMPORTED_MODULE_19__["AddDevicePageModule"],
                _help_help_module__WEBPACK_IMPORTED_MODULE_20__["HelpPageModule"]
            ],
            providers: [
                // PROVIDERS
                // AuthProvider,
                // DatabaseProvider,
                _providers__WEBPACK_IMPORTED_MODULE_15__["BLEProvider"],
                _providers__WEBPACK_IMPORTED_MODULE_15__["LoadingProvider"],
                _providers__WEBPACK_IMPORTED_MODULE_15__["DataProvider"],
                _providers__WEBPACK_IMPORTED_MODULE_15__["LocalDatabaseProvider"],
                // NATIVE
                _ionic_native_status_bar_ngx__WEBPACK_IMPORTED_MODULE_9__["StatusBar"],
                _ionic_native_splash_screen_ngx__WEBPACK_IMPORTED_MODULE_8__["SplashScreen"],
                _ionic_native_ble_ngx__WEBPACK_IMPORTED_MODULE_10__["BLE"],
                _ionic_native_open_native_settings_ngx__WEBPACK_IMPORTED_MODULE_11__["OpenNativeSettings"],
                _ionic_native_native_storage_ngx__WEBPACK_IMPORTED_MODULE_12__["NativeStorage"],
                _ionic_native_app_version_ngx__WEBPACK_IMPORTED_MODULE_13__["AppVersion"],
                _ionic_native_local_notifications_ngx__WEBPACK_IMPORTED_MODULE_14__["LocalNotifications"],
                // OTHER
                { provide: _angular_router__WEBPACK_IMPORTED_MODULE_6__["RouteReuseStrategy"], useClass: _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["IonicRouteStrategy"] }
            ],
            bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_3__["AppComponent"]]
        })
    ], AppModule);
    return AppModule;
}());



/***/ }),

/***/ "./src/app/details/details.module.ts":
/*!*******************************************!*\
  !*** ./src/app/details/details.module.ts ***!
  \*******************************************/
/*! exports provided: DetailsPageModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetailsPageModule", function() { return DetailsPageModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _details_page__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./details.page */ "./src/app/details/details.page.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






var routes = [
    {
        path: '',
        component: _details_page__WEBPACK_IMPORTED_MODULE_5__["DetailsPage"]
    }
];
var DetailsPageModule = /** @class */ (function () {
    function DetailsPageModule() {
    }
    DetailsPageModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
                _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["IonicModule"],
                _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouterModule"].forChild(routes)
            ],
            declarations: [_details_page__WEBPACK_IMPORTED_MODULE_5__["DetailsPage"]]
        })
    ], DetailsPageModule);
    return DetailsPageModule;
}());



/***/ }),

/***/ "./src/app/details/details.page.html":
/*!*******************************************!*\
  !*** ./src/app/details/details.page.html ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ion-header>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"back()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>Details {{ getTitle(measurement.startTs, measurement.endTs) }}</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <h3 style=\"padding-left: 16px\">{{ getHeader() }}</h3>\n  <ion-grid no-padding>\n    <ion-row no-padding>\n      <ion-col size=\"6\" no-padding>\n        <ion-card style=\"background-color: #fff\">\n          <ion-card-header>\n            <ion-card-subtitle>Rating</ion-card-subtitle>\n          </ion-card-header>\n          <ion-card-content>\n            <ion-row>\n              <ion-col size=\"9\">\n                <p>\n                  {{ rating }}\n                </p>\n              </ion-col>\n              <ion-col size=\"3\">\n                <ion-icon [color]=\"emojiColor\" [src]=\"emojiUrl\" style=\"font-size: 2.5em\"></ion-icon>\n              </ion-col>\n            </ion-row>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n      <ion-col size=\"6\" no-padding>\n        <ion-card style=\"background-color: #fff\">\n          <ion-card-header>\n            <ion-card-subtitle>Water</ion-card-subtitle>\n          </ion-card-header>\n          <ion-card-content>\n            <p class=\"result\">\n              {{ water }} {{ getWaterAmountUnit() }}\n            </p>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n    </ion-row>\n    <ion-row no-padding>\n      <ion-col size=\"6\" no-padding>\n        <ion-card style=\"background-color: #fff\">\n          <ion-card-header>\n            <ion-card-subtitle>Temperature</ion-card-subtitle>\n          </ion-card-header>\n          <ion-card-content>\n            <p *ngIf=\"data.user.units.temperature === 'c'\" class=\"result\">\n              {{ temperature }} °C\n            </p>\n            <p *ngIf=\"data.user.units.temperature === 'f'\" class=\"result\">\n              {{ cToF(temperature) }} °F\n            </p>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n      <ion-col size=\"6\" no-padding>\n        <ion-card *ngIf=\"data.user.units.heatingMethod === 'electricity'\" style=\"background-color: #fff\">\n          <ion-card-header>\n            <ion-card-subtitle>Electricity</ion-card-subtitle>\n          </ion-card-header>\n          <ion-card-content>\n            <p class=\"result\">\n              {{ electricity.toFixed(1) }} kWh\n            </p>\n          </ion-card-content>\n        </ion-card>\n        <ion-card *ngIf=\"data.user.units.heatingMethod === 'gas'\" style=\"background-color: #fff\">\n            <ion-card-header>\n              <ion-card-subtitle>Gas</ion-card-subtitle>\n            </ion-card-header>\n            <ion-card-content>\n              <p class=\"result\">\n                {{ gasAmountFt3.toFixed(1) }} ft<sup>3</sup>\n              </p>\n            </ion-card-content>\n          </ion-card>\n      </ion-col>\n    </ion-row>\n    <ion-row no-padding>\n      <ion-col size=\"6\" no-padding>\n        <ion-card style=\"background-color: #fff\">\n          <ion-card-header>\n            <ion-card-subtitle>Cost</ion-card-subtitle>\n          </ion-card-header>\n          <ion-card-content>\n            <p class=\"result\">\n              {{ cost.toFixed(2) }} {{ getCurrencySymbol() }}\n            </p>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n      <ion-col size=\"6\" no-padding>\n        <ion-card style=\"background-color: #fff\">\n          <ion-card-header>\n            <ion-card-subtitle>Duration</ion-card-subtitle>\n          </ion-card-header>\n          <ion-card-content>\n            <p class=\"result\">\n              {{ duration }}\n            </p>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n    </ion-row>\n    <ion-row no-padding>\n      <ion-col size=\"6\" no-padding>\n        <ion-card style=\"background-color: #fff\">\n          <ion-card-header>\n            <ion-card-subtitle>Device</ion-card-subtitle>\n          </ion-card-header>\n          <ion-card-content>\n            <p class=\"result\">\n              {{ deviceName }}\n            </p>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n      <ion-col size=\"6\" no-padding>\n        <ion-card style=\"background-color: #fff\">\n          <ion-card-header>\n            <ion-card-subtitle>Events</ion-card-subtitle>\n          </ion-card-header>\n          <ion-card-content>\n            <p class=\"result\">\n              {{ eventAmount }}\n            </p>\n          </ion-card-content>\n        </ion-card>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</ion-content>"

/***/ }),

/***/ "./src/app/details/details.page.scss":
/*!*******************************************!*\
  !*** ./src/app/details/details.page.scss ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "ion-content {\n  --background: var(--ion-color-light); }\n\nion-card {\n  margin: 5px; }\n\n.result {\n  font-size: 1.2em;\n  font-weight: 500; }\n\n.rating {\n  font-size: 0.6em; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvZGV0YWlscy9DOlxcd29ya1xcZGV2XFxzdHJlYW1zYXZlL3NyY1xcYXBwXFxkZXRhaWxzXFxkZXRhaWxzLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLG9DQUFhLEVBQUE7O0FBRWY7RUFDRSxXQUFXLEVBQUE7O0FBR2I7RUFDRSxnQkFBZ0I7RUFDaEIsZ0JBQWdCLEVBQUE7O0FBR2xCO0VBQ0UsZ0JBQWdCLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9kZXRhaWxzL2RldGFpbHMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbnRlbnQge1xyXG4gIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLWxpZ2h0KTtcclxufVxyXG5pb24tY2FyZCB7XHJcbiAgbWFyZ2luOiA1cHg7XHJcbn1cclxuXHJcbi5yZXN1bHQge1xyXG4gIGZvbnQtc2l6ZTogMS4yZW07XHJcbiAgZm9udC13ZWlnaHQ6IDUwMDtcclxufVxyXG5cclxuLnJhdGluZyB7XHJcbiAgZm9udC1zaXplOiAwLjZlbTtcclxufSJdfQ== */"

/***/ }),

/***/ "./src/app/details/details.page.ts":
/*!*****************************************!*\
  !*** ./src/app/details/details.page.ts ***!
  \*****************************************/
/*! exports provided: DetailsPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetailsPage", function() { return DetailsPage; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! moment */ "./node_modules/moment/moment.js");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var src_providers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/providers */ "./src/providers/index.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var DetailsPage = /** @class */ (function () {
    function DetailsPage(navParams, modalController, data) {
        this.navParams = navParams;
        this.modalController = modalController;
        this.data = data;
        this.measurement = this.navParams.get('measurement');
        this.type = this.navParams.get('type');
        this.setDetailValues();
    }
    DetailsPage.prototype.ngOnInit = function () { };
    DetailsPage.prototype.setDetailValues = function () {
        if (this.type === 'perEvent') {
            var waterHeatCapacity = 4.1813;
            var energykWh = this.measurement.energy * 1000;
            var litres = this.measurement.water;
            var waterInCubicMetres = this.measurement.water / 1000;
            console.log('waterInCubicMetres', waterInCubicMetres);
            var cost = this.getEnergyCost(energykWh) + waterInCubicMetres * this.data.user.units.waterPrice;
            console.log('energy price', energykWh * this.data.user.units.electricity.kWhPrice / 100);
            console.log('water price', waterInCubicMetres * this.data.user.units.waterPrice);
            this.rating = this.getRating(cost / this.measurement.bootCount);
            this.water = this.data.user.units.heatingMethod === 'electricity' ?
                Math.round(this.getWaterAmount(litres) / this.measurement.bootCount) :
                Math.round((this.getWaterAmount(litres) / this.measurement.bootCount) * 10) / 10;
            var tempDelta = ((energykWh * 3.6 * 1000) / (litres * waterHeatCapacity));
            this.temperature = Math.round((tempDelta + 4 / this.measurement.bootCount) * 10) / 10;
            this.electricity = Math.round((energykWh / this.measurement.bootCount) * 1000) / 1000;
            this.cost = Math.round((cost / this.measurement.bootCount) * 1000) / 1000;
            this.duration = this.convertSToTime(this.measurement.runtime / this.measurement.bootCount);
            this.deviceName = this.measurement.deviceId.toString();
            this.eventAmount = this.measurement.bootCount;
            var btu2kw = 0.2931 / 1000;
            this.gasAmountFt3 = (energykWh / btu2kw / this.data.user.units.gas.heatContent) / this.measurement.bootCount;
        }
        else if (this.type === 'total') {
            var waterHeatCapacity = 4.1813;
            var energykWh = this.measurement.energy * 1000;
            var litres = this.measurement.water;
            var waterInCubicMetres = this.measurement.water / 1000;
            console.log('waterInCubicMetres', waterInCubicMetres);
            var cost = this.getEnergyCost(energykWh) + waterInCubicMetres * this.data.user.units.waterPrice;
            console.log('energy price', energykWh * this.data.user.units.electricity.kWhPrice / 100);
            console.log('water price', waterInCubicMetres * this.data.user.units.waterPrice);
            this.rating = this.getRating(cost);
            this.water = this.getWaterAmount(litres);
            var tempDelta = ((energykWh * 3.6 * 1000) / (litres * waterHeatCapacity));
            this.temperature = Math.round((tempDelta + 4) * 10) / 10;
            this.electricity = Math.round(energykWh * 1000) / 1000;
            this.cost = Math.round(cost * 1000) / 1000;
            this.duration = this.convertSToTime(this.measurement.runtime);
            this.deviceName = this.measurement.deviceId.toString();
            this.eventAmount = this.measurement.bootCount;
            var btu2kw = 0.2931 / 1000;
            this.gasAmountFt3 = energykWh / btu2kw / this.data.user.units.gas.heatContent;
        }
        else {
            return;
        }
    };
    DetailsPage.prototype.getEnergyCost = function (energyKwh) {
        var energyCost; // ? / kWh * energy amount
        var btu2kw = 0.2931 / 1000;
        var gasFt3 = energyKwh / btu2kw / this.data.user.units.gas.heatContent;
        if (this.data.user.units.heatingMethod === 'electricity') {
            return energyCost = energyKwh * (this.data.user.units.electricity.kWhPrice / 100);
        }
        if (this.data.user.units.heatingMethod === 'gas') {
            return energyCost = this.getGasCost(gasFt3);
        }
    };
    DetailsPage.prototype.getGasCost = function (gasAmountFt3) {
        return (gasAmountFt3 / 100) * (this.data.user.units.gas.gasPrice / 100);
    };
    DetailsPage.prototype.getCurrencySymbol = function () {
        return this.data.user.units.currency === 'eur' ? '€' : '$';
    };
    DetailsPage.prototype.getWaterAmountUnit = function () {
        return this.data.user.units.water === 'litres' ? 'L' : 'gal';
    };
    DetailsPage.prototype.getWaterAmount = function (litres) {
        return this.data.user.units.water === 'litres' ? litres : Math.round((litres / 4.546) * 10) / 10;
    };
    DetailsPage.prototype.cToF = function (celsius) {
        return celsius ? Math.round(((celsius * (9 / 5)) + 32) * 10) / 10 : 0;
    };
    DetailsPage.prototype.getRating = function (consumption) {
        if (consumption <= this.data.user.ranges.good) {
            this.emojiUrl = 'assets/icon/grin-regular.svg';
            // this.emojiColor = '#42B771';
            this.emojiColor = 'good';
            return 'Good';
        }
        else if (consumption > this.data.user.ranges.good && consumption <= this.data.user.ranges.mediocre) {
            this.emojiUrl = 'assets/icon/meh-regular.svg';
            // this.emojiColor = '#F4D41E';
            this.emojiColor = 'mediocre';
            return 'Mediocre';
        }
        else if (consumption > this.data.user.ranges.needsImprovement) {
            this.emojiUrl = 'assets/icon/meh-regular.svg';
            // this.emojiColor = '#E84652';
            this.emojiColor = 'bad';
            return 'Needs improvement';
        }
    };
    DetailsPage.prototype.getEmoji = function (rating) {
    };
    DetailsPage.prototype.getTitle = function (start, end) {
        return moment__WEBPACK_IMPORTED_MODULE_2__["unix"](start / 1000).format('DD.MM.') + ' - ' + moment__WEBPACK_IMPORTED_MODULE_2__["unix"](end / 1000).format('DD.MM.');
    };
    DetailsPage.prototype.getHeader = function () {
        var returnValue;
        switch (this.type) {
            case 'perEvent':
                returnValue = 'Average per event';
                break;
            case 'total':
                returnValue = 'Total';
                break;
            default:
                returnValue = '';
                break;
        }
        return returnValue;
    };
    DetailsPage.prototype.convertSToTime = function (s) {
        return new Date(s * 1000).toISOString().substr(11, 8);
    };
    DetailsPage.prototype.back = function () {
        this.modalController.dismiss();
    };
    DetailsPage = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-details',
            template: __webpack_require__(/*! ./details.page.html */ "./src/app/details/details.page.html"),
            styles: [__webpack_require__(/*! ./details.page.scss */ "./src/app/details/details.page.scss")]
        }),
        __metadata("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_1__["NavParams"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_1__["ModalController"],
            src_providers__WEBPACK_IMPORTED_MODULE_3__["DataProvider"]])
    ], DetailsPage);
    return DetailsPage;
}());



/***/ }),

/***/ "./src/app/help/help.module.ts":
/*!*************************************!*\
  !*** ./src/app/help/help.module.ts ***!
  \*************************************/
/*! exports provided: HelpPageModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HelpPageModule", function() { return HelpPageModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "./node_modules/@angular/router/fesm5/router.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _help_page__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./help.page */ "./src/app/help/help.page.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






var routes = [
    {
        path: '',
        component: _help_page__WEBPACK_IMPORTED_MODULE_5__["HelpPage"]
    }
];
var HelpPageModule = /** @class */ (function () {
    function HelpPageModule() {
    }
    HelpPageModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            imports: [
                _angular_common__WEBPACK_IMPORTED_MODULE_1__["CommonModule"],
                _angular_forms__WEBPACK_IMPORTED_MODULE_2__["FormsModule"],
                _ionic_angular__WEBPACK_IMPORTED_MODULE_4__["IonicModule"],
                _angular_router__WEBPACK_IMPORTED_MODULE_3__["RouterModule"].forChild(routes)
            ],
            declarations: [_help_page__WEBPACK_IMPORTED_MODULE_5__["HelpPage"]]
        })
    ], HelpPageModule);
    return HelpPageModule;
}());



/***/ }),

/***/ "./src/app/help/help.page.html":
/*!*************************************!*\
  !*** ./src/app/help/help.page.html ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<!-- <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"back()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>Help</ion-title>\n  </ion-toolbar> -->\n\n<ion-content padding-left padding-right>\n\n  <ion-slides #slides pager=\"false\" [options]=\"slideOpts\" style=\"height:100%;\">\n    <ion-slide>\n      <ion-grid style=\"width: 80%;\">\n        <ion-row text-center justify-content-center style=\"padding-bottom: 1.0rem;\">\n          <ion-text color=\"light\">\n            <h1>欢迎来到Streamsave!</h1>\n          </ion-text>\n          <ion-text color=\"light\">\n            <p class=\"ion-no-padding ion-no-margin\" style=\"font-size: 1rem\">这里有一些提示,以得到最出你的经验</p>\n          </ion-text>\n        </ion-row>\n        <ion-row>\n          <ion-col size=\"7\" text-center>\n            <ion-text color=\"light\">\n              <ion-row align-items-center>\n                <ion-col size=\"10\">\n                  <p class=\"ion-no-padding ion-no-margin\" style=\"font-size: 0.9rem\">数字表示的事件在\n                    这个\n                    数据\n                    集</p>\n                </ion-col>\n                <ion-col size=\"2\">\n                  <ion-icon name=\"arrow-round-forward\" color=\"light\" style=\"font-size: 2.0rem;\"></ion-icon>\n                </ion-col>\n              </ion-row>\n            </ion-text>\n          </ion-col>\n          <ion-col size=\"5\">\n            <ion-row>\n              <ion-col size=\"12\" text-center>\n                <ion-text color=\"light\">\n                  <p class=\"ion-no-padding ion-no-margin\" style=\"font-size: 0.9rem\">\n                    140\n                  </p>\n                </ion-text>\n              </ion-col>\n              <ion-col size=\"12\" text-center>\n                <svg width=\"40%\" height=\"100\">\n                  <rect width=\"100%\" height=\"90\" style=\"fill:#F4D41E;\" />\n                </svg>\n              </ion-col>\n              <ion-col size=\"12\" text-center style=\"margin-top: -2.2rem;\">\n                <ion-icon src=\"assets/icon/tap.svg\" style=\"font-size: 2.5rem; color: #f4f5f8\"></ion-icon>\n\n              </ion-col>\n              <ion-col size=\"12\" class=\"ion-no-padding ion-no-margin\" text-center>\n                <ion-text color=\"light\">\n                  <p class=\"ion-no-padding ion-no-margin\" style=\"font-size: 0.9rem\">触摸查看详情</p>\n                </ion-text>\n              </ion-col>\n            </ion-row>\n          </ion-col>\n        </ion-row>\n        <ion-row margin-top>\n          <ion-col size=\"12\" text-center class=\"ion-no-padding ion-no-margin\">\n            <ion-icon color=\"light\" class=\"animation-rotate\" name=\"phone-portrait\" style=\"font-size: 4.5rem\"></ion-icon>\n          </ion-col>\n          <ion-col size=\"12\" text-center class=\"ion-no-padding ion-no-margin\">\n            <ion-text color=\"light\">\n              <p class=\"ion-no-padding ion-no-margin\"\n                style=\"font-size: 0.9rem; width: 70%; margin-left: auto; margin-right: auto;\">旋转手机在屏幕上\n                查看\n                更多的\n                图像</p>\n            </ion-text>\n          </ion-col>\n        </ion-row>\n        <ion-row margin-top>\n          <ion-col size=\"12\" text-center>\n            <ion-button color=\"helpblue\" (click)=\"slides.slideNext()\">继续</ion-button>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-slide>\n    <ion-slide>\n      <ion-grid style=\"width: 80%;\">\n        <ion-row text-center justify-content-center style=\"margin-bottom: 3.0rem;\">\n          <ion-text color=\"light\">\n            <h1 class=\"ion-no-padding ion-no-margin\">Setting up your device!</h1>\n          </ion-text>\n          <ion-text color=\"light\">\n            <p class=\"ion-no-padding ion-no-margin\" style=\"font-size: 1rem\">\n              In order to start gathering data we will need to setup your device first.\n            </p>\n          </ion-text>\n        </ion-row>\n        <ion-row>\n          <ion-col size=\"12\" text-center class=\"ion-no-padding ion-no-margin\">\n            <ion-icon color=\"light\" name=\"information-circle\" style=\"font-size: 2rem\"></ion-icon>\n          </ion-col>\n          <ion-col size=\"12\" text-center class=\"ion-no-padding ion-no-margin\">\n            <ion-text color=\"light\">\n              <p class=\"ion-no-padding ion-no-margin\" style=\"font-size: 0.9rem;\">\n                If you want to add more devices later, you can find the option from:\n              </p>\n            </ion-text>\n          </ion-col>\n        </ion-row>\n        <ion-item lines=\"none\">\n          <ion-label color=\"light\">\n            Home -> Settings\n          </ion-label>\n          <ion-icon color=\"light\" name=\"settings\" slot=\"start\"></ion-icon>\n          <ion-icon color=\"light\" name=\"arrow-round-forward\" slot=\"end\"></ion-icon>\n        </ion-item>\n        <ion-item lines=\"none\">\n          <ion-label color=\"light\">\n            Devices\n          </ion-label>\n          <ion-icon color=\"light\" src=\"/assets/icon/shower-solid.svg\" slot=\"start\"></ion-icon>\n          <ion-icon color=\"light\" name=\"arrow-round-forward\" slot=\"end\"></ion-icon>\n        </ion-item>\n        <ion-item lines=\"none\">\n          <ion-label color=\"light\">\n            Add device\n          </ion-label>\n          <ion-icon color=\"light\" name=\"add-circle\" slot=\"start\"></ion-icon>\n        </ion-item>\n\n        <ion-button *ngIf=\"isDeviceListEmpty\" margin-top color=\"helpblue\" (click)=\"back()\">Add device</ion-button>\n        <span *ngIf=\"isDeviceListEmpty\">&nbsp;&nbsp;&nbsp;</span>\n        <ion-button margin-top color=\"helpblue\" (click)=\"back(true)\">OK</ion-button>\n      </ion-grid>\n\n    </ion-slide>\n\n  </ion-slides>\n\n\n\n\n\n</ion-content>"

/***/ }),

/***/ "./src/app/help/help.page.scss":
/*!*************************************!*\
  !*** ./src/app/help/help.page.scss ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "ion-content {\n  --background: rgba(0, 0, 0, 0.5) !important; }\n\n@-webkit-keyframes rotate {\n  0% {\n    -webkit-transform: rotate(0deg); }\n  25% {\n    -webkit-transform: rotate(90deg); }\n  50% {\n    -webkit-transform: rotate(90deg); }\n  75% {\n    -webkit-transform: rotate(90deg); }\n  100% {\n    -webkit-transform: rotate(0deg); } }\n\n.animation-rotate {\n  -webkit-animation-name: rotate;\n  -webkit-animation-duration: 3s;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-transition-timing-function: ease-in-out; }\n\nion-slides {\n  --bullet-background-active: #59C6F2;\n  --bullet-background: #33738b; }\n\nion-item {\n  --background: transparent;\n  font-size: 0.9rem; }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaGVscC9DOlxcd29ya1xcZGV2XFxzdHJlYW1zYXZlL3NyY1xcYXBwXFxoZWxwXFxoZWxwLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVFLDJDQUFhLEVBQUE7O0FBR2Y7RUFDRTtJQUFLLCtCQUErQixFQUFBO0VBQ3BDO0lBQU0sZ0NBQWdDLEVBQUE7RUFDdEM7SUFBTSxnQ0FBZ0MsRUFBQTtFQUN0QztJQUFNLGdDQUFnQyxFQUFBO0VBQ3RDO0lBQU8sK0JBQStCLEVBQUEsRUFBQTs7QUFHeEM7RUFDSSw4QkFBOEI7RUFDOUIsOEJBQThCO0VBQzlCLDJDQUEyQztFQUMzQywrQ0FBK0MsRUFBQTs7QUFHbkQ7RUFDRSxtQ0FBMkI7RUFDM0IsNEJBQW9CLEVBQUE7O0FBR3RCO0VBQ0UseUJBQWE7RUFDYixpQkFBaUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2hlbHAvaGVscC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29udGVudCB7XHJcbiAgLy8gLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItbGlnaHQpO1xyXG4gIC0tYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbkAtd2Via2l0LWtleWZyYW1lcyByb3RhdGUge1xyXG4gIDAlIHsgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfVxyXG4gIDI1JSB7IC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoOTBkZWcpOyB9XHJcbiAgNTAlIHsgLXdlYmtpdC10cmFuc2Zvcm06IHJvdGF0ZSg5MGRlZyk7IH1cclxuICA3NSUgeyAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDkwZGVnKTsgfVxyXG4gIDEwMCUgeyAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XHJcbn1cclxuXHJcbi5hbmltYXRpb24tcm90YXRlIHtcclxuICAgIC13ZWJraXQtYW5pbWF0aW9uLW5hbWU6IHJvdGF0ZTtcclxuICAgIC13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOiAzcztcclxuICAgIC13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogaW5maW5pdGU7XHJcbiAgICAtd2Via2l0LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluLW91dDtcclxufVxyXG5cclxuaW9uLXNsaWRlcyB7XHJcbiAgLS1idWxsZXQtYmFja2dyb3VuZC1hY3RpdmU6ICM1OUM2RjI7XHJcbiAgLS1idWxsZXQtYmFja2dyb3VuZDogIzMzNzM4YjtcclxufVxyXG5cclxuaW9uLWl0ZW0ge1xyXG4gIC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XHJcbiAgZm9udC1zaXplOiAwLjlyZW07XHJcbn0iXX0= */"

/***/ }),

/***/ "./src/app/help/help.page.ts":
/*!***********************************!*\
  !*** ./src/app/help/help.page.ts ***!
  \***********************************/
/*! exports provided: HelpPage */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "HelpPage", function() { return HelpPage; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var HelpPage = /** @class */ (function () {
    function HelpPage(modalController, navParams) {
        this.modalController = modalController;
        this.navParams = navParams;
        this.slideOpts = {
            effect: 'flip'
        };
        this.isDeviceListEmpty = false;
        this.isDeviceListEmpty = this.navParams.get('isDeviceListEmpty');
    }
    HelpPage.prototype.ngOnInit = function () {
    };
    HelpPage.prototype.back = function (skipDeviceAdd) {
        if (skipDeviceAdd === void 0) { skipDeviceAdd = false; }
        this.modalController.dismiss({ isDeviceListEmpty: skipDeviceAdd ? null : this.isDeviceListEmpty });
    };
    HelpPage = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'app-help',
            template: __webpack_require__(/*! ./help.page.html */ "./src/app/help/help.page.html"),
            styles: [__webpack_require__(/*! ./help.page.scss */ "./src/app/help/help.page.scss")]
        }),
        __metadata("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_1__["ModalController"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_1__["NavParams"]])
    ], HelpPage);
    return HelpPage;
}());



/***/ }),

/***/ "./src/entities/deviceClosedMeasurement.ts":
/*!*************************************************!*\
  !*** ./src/entities/deviceClosedMeasurement.ts ***!
  \*************************************************/
/*! exports provided: DeviceClosedMeasurementEntity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeviceClosedMeasurementEntity", function() { return DeviceClosedMeasurementEntity; });
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! typeorm */ "./node_modules/typeorm/browser/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var DeviceClosedMeasurementEntity = /** @class */ (function () {
    function DeviceClosedMeasurementEntity() {
    }
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["PrimaryColumn"])(),
        __metadata("design:type", Number)
    ], DeviceClosedMeasurementEntity.prototype, "deviceId", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], DeviceClosedMeasurementEntity.prototype, "runtime", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], DeviceClosedMeasurementEntity.prototype, "water", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], DeviceClosedMeasurementEntity.prototype, "energy", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], DeviceClosedMeasurementEntity.prototype, "bootCount", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], DeviceClosedMeasurementEntity.prototype, "startTs", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], DeviceClosedMeasurementEntity.prototype, "endTs", void 0);
    DeviceClosedMeasurementEntity = __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Entity"])('deviceClosedMeasurement')
    ], DeviceClosedMeasurementEntity);
    return DeviceClosedMeasurementEntity;
}());



/***/ }),

/***/ "./src/entities/measurement.ts":
/*!*************************************!*\
  !*** ./src/entities/measurement.ts ***!
  \*************************************/
/*! exports provided: MeasurementEntity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MeasurementEntity", function() { return MeasurementEntity; });
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! typeorm */ "./node_modules/typeorm/browser/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var MeasurementEntity = /** @class */ (function () {
    function MeasurementEntity() {
    }
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["PrimaryGeneratedColumn"])(),
        __metadata("design:type", Number)
    ], MeasurementEntity.prototype, "id", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], MeasurementEntity.prototype, "deviceId", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], MeasurementEntity.prototype, "runtime", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], MeasurementEntity.prototype, "water", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], MeasurementEntity.prototype, "energy", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], MeasurementEntity.prototype, "bootCount", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], MeasurementEntity.prototype, "startTs", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], MeasurementEntity.prototype, "endTs", void 0);
    MeasurementEntity = __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Entity"])('measurement')
    ], MeasurementEntity);
    return MeasurementEntity;
}());



/***/ }),

/***/ "./src/entities/prevousMeasurement.ts":
/*!********************************************!*\
  !*** ./src/entities/prevousMeasurement.ts ***!
  \********************************************/
/*! exports provided: PreviousMeasurementEntity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PreviousMeasurementEntity", function() { return PreviousMeasurementEntity; });
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! typeorm */ "./node_modules/typeorm/browser/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var PreviousMeasurementEntity = /** @class */ (function () {
    function PreviousMeasurementEntity() {
    }
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["PrimaryColumn"])(),
        __metadata("design:type", Number)
    ], PreviousMeasurementEntity.prototype, "deviceId", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], PreviousMeasurementEntity.prototype, "runtime", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], PreviousMeasurementEntity.prototype, "water", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], PreviousMeasurementEntity.prototype, "energy", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Number)
    ], PreviousMeasurementEntity.prototype, "bootCount", void 0);
    PreviousMeasurementEntity = __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Entity"])('previousMeasurement')
    ], PreviousMeasurementEntity);
    return PreviousMeasurementEntity;
}());



/***/ }),

/***/ "./src/entities/user.ts":
/*!******************************!*\
  !*** ./src/entities/user.ts ***!
  \******************************/
/*! exports provided: UserEntity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserEntity", function() { return UserEntity; });
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! typeorm */ "./node_modules/typeorm/browser/index.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var UserEntity = /** @class */ (function () {
    function UserEntity() {
    }
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["PrimaryGeneratedColumn"])(),
        __metadata("design:type", Number)
    ], UserEntity.prototype, "uid", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", String)
    ], UserEntity.prototype, "email", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", Boolean)
    ], UserEntity.prototype, "allowNotifications", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", String)
    ], UserEntity.prototype, "devices", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", String)
    ], UserEntity.prototype, "ranges", void 0);
    __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Column"])(),
        __metadata("design:type", String)
    ], UserEntity.prototype, "units", void 0);
    UserEntity = __decorate([
        Object(typeorm__WEBPACK_IMPORTED_MODULE_0__["Entity"])('user')
    ], UserEntity);
    return UserEntity;
}());



/***/ }),

/***/ "./src/environments/environment.ts":
/*!*****************************************!*\
  !*** ./src/environments/environment.ts ***!
  \*****************************************/
/*! exports provided: environment */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "environment", function() { return environment; });
// This file can be replaced during build by using the `fileReplacements` array.
// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
var environment = {
    production: false,
    firebase: {
        apiKey: 'AIzaSyAdkeKVGI0C-DRPdB11aqAzTdZJ2YefmYU',
        authDomain: 'streamsave-app.firebaseapp.com',
        databaseURL: 'https://streamsave-app.firebaseio.com',
        projectId: 'streamsave-app',
        storageBucket: 'streamsave-app.appspot.com',
        messagingSenderId: '910005498726'
    }
};
/*
 * For easier debugging in development mode, you can import the following file
 * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
 *
 * This import should be commented out in production mode because it will have a negative impact
 * on performance if an error is thrown.
 */
// import 'zone.js/dist/zone-error';  // Included with Angular CLI.


/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/fesm5/platform-browser-dynamic.js");
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/app.module */ "./src/app/app.module.ts");
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./environments/environment */ "./src/environments/environment.ts");




if (_environments_environment__WEBPACK_IMPORTED_MODULE_3__["environment"].production) {
    Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["enableProdMode"])();
}
Object(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_1__["platformBrowserDynamic"])().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_2__["AppModule"])
    .catch(function (err) { return console.log(err); });


/***/ }),

/***/ "./src/models/device.ts":
/*!******************************!*\
  !*** ./src/models/device.ts ***!
  \******************************/
/*! exports provided: Device */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Device", function() { return Device; });
var Device = /** @class */ (function () {
    function Device(id, name, advertisementData, cumulativeData) {
        this.id = id;
        this.name = name;
        this.advertisementData = advertisementData;
        this.cumulativeData = cumulativeData;
    }
    return Device;
}());



/***/ }),

/***/ "./src/models/electricity.ts":
/*!***********************************!*\
  !*** ./src/models/electricity.ts ***!
  \***********************************/
/*! exports provided: Electricity */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Electricity", function() { return Electricity; });
var Electricity = /** @class */ (function () {
    function Electricity(kWhPrice) {
        this.kWhPrice = kWhPrice;
    }
    return Electricity;
}());



/***/ }),

/***/ "./src/models/gas.ts":
/*!***************************!*\
  !*** ./src/models/gas.ts ***!
  \***************************/
/*! exports provided: Gas */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Gas", function() { return Gas; });
var Gas = /** @class */ (function () {
    function Gas(gasPrice, heatContent) {
        this.gasPrice = gasPrice;
        this.heatContent = heatContent;
    }
    return Gas;
}());



/***/ }),

/***/ "./src/models/index.ts":
/*!*****************************!*\
  !*** ./src/models/index.ts ***!
  \*****************************/
/*! exports provided: User, Device, Units, Gas, Electricity, Ranges, Measurement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./user */ "./src/models/user.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "User", function() { return _user__WEBPACK_IMPORTED_MODULE_0__["User"]; });

/* harmony import */ var _device__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./device */ "./src/models/device.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Device", function() { return _device__WEBPACK_IMPORTED_MODULE_1__["Device"]; });

/* harmony import */ var _units__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./units */ "./src/models/units.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Units", function() { return _units__WEBPACK_IMPORTED_MODULE_2__["Units"]; });

/* harmony import */ var _gas__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./gas */ "./src/models/gas.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Gas", function() { return _gas__WEBPACK_IMPORTED_MODULE_3__["Gas"]; });

/* harmony import */ var _electricity__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./electricity */ "./src/models/electricity.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Electricity", function() { return _electricity__WEBPACK_IMPORTED_MODULE_4__["Electricity"]; });

/* harmony import */ var _ranges__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ranges */ "./src/models/ranges.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Ranges", function() { return _ranges__WEBPACK_IMPORTED_MODULE_5__["Ranges"]; });

/* harmony import */ var _measurement__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./measurement */ "./src/models/measurement.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Measurement", function() { return _measurement__WEBPACK_IMPORTED_MODULE_6__["Measurement"]; });










/***/ }),

/***/ "./src/models/measurement.ts":
/*!***********************************!*\
  !*** ./src/models/measurement.ts ***!
  \***********************************/
/*! exports provided: Measurement */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Measurement", function() { return Measurement; });
var Measurement = /** @class */ (function () {
    function Measurement(runtime, water, energy, bootCount, deviceId, startTs, endTs, id) {
        this.runtime = runtime;
        this.water = water;
        this.energy = energy;
        this.bootCount = bootCount;
        this.deviceId = deviceId;
        this.startTs = startTs;
        this.endTs = endTs;
        this.id = id;
    }
    return Measurement;
}());



/***/ }),

/***/ "./src/models/ranges.ts":
/*!******************************!*\
  !*** ./src/models/ranges.ts ***!
  \******************************/
/*! exports provided: Ranges */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Ranges", function() { return Ranges; });
var Ranges = /** @class */ (function () {
    function Ranges(good, mediocre, needsImprovement, eventNotificationLimit, weeklyLimit, monthlyLimit) {
        this.good = good;
        this.mediocre = mediocre;
        this.needsImprovement = needsImprovement;
        this.eventNotificationLimit = eventNotificationLimit;
        this.weeklyLimit = weeklyLimit;
        this.monthlyLimit = monthlyLimit;
    }
    return Ranges;
}());



/***/ }),

/***/ "./src/models/units.ts":
/*!*****************************!*\
  !*** ./src/models/units.ts ***!
  \*****************************/
/*! exports provided: Units */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Units", function() { return Units; });
var Units = /** @class */ (function () {
    function Units(water, // always save all measurement data in litres, parse gallons client side
    temperature, // always save all measurement data in C, parse f client side
    currency, waterPrice, // always save as eur/m2, parse in other clientside
    heatingMethod, electricity, gas) {
        this.water = water;
        this.temperature = temperature;
        this.currency = currency;
        this.waterPrice = waterPrice;
        this.heatingMethod = heatingMethod;
        this.electricity = electricity;
        this.gas = gas;
    }
    return Units;
}());



/***/ }),

/***/ "./src/models/user.ts":
/*!****************************!*\
  !*** ./src/models/user.ts ***!
  \****************************/
/*! exports provided: User */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "User", function() { return User; });
var User = /** @class */ (function () {
    function User(uid, email, allowNotifications, devices, ranges, units) {
        this.uid = uid;
        this.email = email;
        this.allowNotifications = allowNotifications;
        this.devices = devices;
        this.ranges = ranges;
        this.units = units;
    }
    return User;
}());



/***/ }),

/***/ "./src/modules/ion-bottom-drawer/drawer-state.ts":
/*!*******************************************************!*\
  !*** ./src/modules/ion-bottom-drawer/drawer-state.ts ***!
  \*******************************************************/
/*! exports provided: DrawerState */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DrawerState", function() { return DrawerState; });
var DrawerState;
(function (DrawerState) {
    DrawerState[DrawerState["Bottom"] = 0] = "Bottom";
    DrawerState[DrawerState["Docked"] = 1] = "Docked";
    DrawerState[DrawerState["Top"] = 2] = "Top";
})(DrawerState || (DrawerState = {}));


/***/ }),

/***/ "./src/modules/ion-bottom-drawer/ion-bottom-drawer.html":
/*!**************************************************************!*\
  !*** ./src/modules/ion-bottom-drawer/ion-bottom-drawer.html ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ion-content class=\"ion-bottom-drawer-scrollable-content\" no-bounce>\n  <ng-content></ng-content>\n</ion-content>\n"

/***/ }),

/***/ "./src/modules/ion-bottom-drawer/ion-bottom-drawer.module.ts":
/*!*******************************************************************!*\
  !*** ./src/modules/ion-bottom-drawer/ion-bottom-drawer.module.ts ***!
  \*******************************************************************/
/*! exports provided: IonBottomDrawerModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IonBottomDrawerModule", function() { return IonBottomDrawerModule; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _ion_bottom_drawer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ion-bottom-drawer */ "./src/modules/ion-bottom-drawer/ion-bottom-drawer.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var IonBottomDrawerModule = /** @class */ (function () {
    function IonBottomDrawerModule() {
    }
    IonBottomDrawerModule = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["NgModule"])({
            declarations: [_ion_bottom_drawer__WEBPACK_IMPORTED_MODULE_2__["IonBottomDrawerComponent"]],
            imports: [_ionic_angular__WEBPACK_IMPORTED_MODULE_1__["IonicModule"]],
            exports: [_ion_bottom_drawer__WEBPACK_IMPORTED_MODULE_2__["IonBottomDrawerComponent"]],
            schemas: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["CUSTOM_ELEMENTS_SCHEMA"]]
        })
    ], IonBottomDrawerModule);
    return IonBottomDrawerModule;
}());



/***/ }),

/***/ "./src/modules/ion-bottom-drawer/ion-bottom-drawer.scss":
/*!**************************************************************!*\
  !*** ./src/modules/ion-bottom-drawer/ion-bottom-drawer.scss ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  z-index: 99 !important;\n  background-color: white;\n  -webkit-transform: translateY(100vh);\n          transform: translateY(100vh); }\n\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9tb2R1bGVzL2lvbi1ib3R0b20tZHJhd2VyL0M6XFx3b3JrXFxkZXZcXHN0cmVhbXNhdmUvc3JjXFxtb2R1bGVzXFxpb24tYm90dG9tLWRyYXdlclxcaW9uLWJvdHRvbS1kcmF3ZXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQVc7RUFDWCxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLE9BQU87RUFDUCxzQkFBc0I7RUFDdEIsdUJBQXVCO0VBQ3ZCLG9DQUE0QjtVQUE1Qiw0QkFBNEIsRUFBQSIsImZpbGUiOiJzcmMvbW9kdWxlcy9pb24tYm90dG9tLWRyYXdlci9pb24tYm90dG9tLWRyYXdlci5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHotaW5kZXg6IDk5ICFpbXBvcnRhbnQ7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMTAwdmgpO1xuXG59XG4iXX0= */"

/***/ }),

/***/ "./src/modules/ion-bottom-drawer/ion-bottom-drawer.ts":
/*!************************************************************!*\
  !*** ./src/modules/ion-bottom-drawer/ion-bottom-drawer.ts ***!
  \************************************************************/
/*! exports provided: IonBottomDrawerComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IonBottomDrawerComponent", function() { return IonBottomDrawerComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _drawer_state__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./drawer-state */ "./src/modules/ion-bottom-drawer/drawer-state.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



// import 'hammerjs';
var IonBottomDrawerComponent = /** @class */ (function () {
    function IonBottomDrawerComponent(_element, _renderer, _domCtrl, _platform) {
        this._element = _element;
        this._renderer = _renderer;
        this._domCtrl = _domCtrl;
        this._platform = _platform;
        this.dockedHeight = 50;
        this.shouldBounce = true;
        this.disableDrag = false;
        this.distanceTop = 0;
        this.transition = '0.25s ease-in-out';
        this.state = _drawer_state__WEBPACK_IMPORTED_MODULE_2__["DrawerState"].Bottom;
        this.minimumHeight = 0;
        this.stateChange = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this._BOUNCE_DELTA = 30;
    }
    IonBottomDrawerComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this._renderer.setStyle(this._element.nativeElement.querySelector('.ion-bottom-drawer-scrollable-content'), 'touch-action', 'none');
        this._setDrawerState(this.state);
        var hammer = new Hammer(this._element.nativeElement, {
            inputClass: Hammer.TouchInput
        });
        hammer.get('pan').set({ direction: Hammer.DIRECTION_VERTICAL, pointers: 1, threshold: 0 });
        hammer.on('panstart pan panend', function (ev) {
            if (_this.disableDrag) {
                return;
            }
            if (ev.srcEvent.type !== 'pointercancel') {
                switch (ev.type) {
                    case 'panstart':
                        _this._handlePanStart();
                        break;
                    case 'panend':
                        _this._handlePanEnd(ev);
                        break;
                    default:
                        _this._handlePan(ev);
                }
            }
        });
        // hammer.get('pan').set({ enable: true, direction: Hammer.DIRECTION_VERTICAL });
        // hammer.on('panstart pandown panup', (ev: any) => {
        //   console.log(ev.type, ev);
        //   if (this.disableDrag) {
        //     return;
        //   }
        //   switch (ev.type) {
        //     case 'panstart':
        //       this._handlePanStart();
        //       break;
        //     case 'pandown':
        //       this._handlePanEnd(ev);
        //       break;
        //       case 'panup':
        //       this._handlePanEnd(ev);
        //       break;
        //     default:
        //       this._handlePan(ev);
        //   }
        // });
    };
    IonBottomDrawerComponent.prototype.ngOnChanges = function (changes) {
        if (!changes.state) {
            return;
        }
        this._setDrawerState(changes.state.currentValue);
    };
    IonBottomDrawerComponent.prototype._setDrawerState = function (state) {
        this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);
        switch (state) {
            case _drawer_state__WEBPACK_IMPORTED_MODULE_2__["DrawerState"].Bottom:
                this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');
                break;
            case _drawer_state__WEBPACK_IMPORTED_MODULE_2__["DrawerState"].Docked:
                this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');
                break;
            default:
                this._setTranslateY(this.distanceTop + 'px');
        }
    };
    IonBottomDrawerComponent.prototype._handlePanStart = function () {
        this._startPositionTop = this._element.nativeElement.getBoundingClientRect().top;
        // console.log(this._startPositionTop);
    };
    IonBottomDrawerComponent.prototype._handlePanEnd = function (ev) {
        if (this.shouldBounce && ev.isFinal) {
            this._renderer.setStyle(this._element.nativeElement, 'transition', this.transition);
            switch (this.state) {
                case _drawer_state__WEBPACK_IMPORTED_MODULE_2__["DrawerState"].Docked:
                    this._handleDockedPanEnd(ev);
                    break;
                case _drawer_state__WEBPACK_IMPORTED_MODULE_2__["DrawerState"].Top:
                    this._handleTopPanEnd(ev);
                    break;
                default:
                    this._handleBottomPanEnd(ev);
            }
        }
        this.stateChange.emit(this.state);
    };
    IonBottomDrawerComponent.prototype._handleTopPanEnd = function (ev) {
        if (ev.deltaY > this._BOUNCE_DELTA) {
            this.state = _drawer_state__WEBPACK_IMPORTED_MODULE_2__["DrawerState"].Docked;
        }
        else {
            this._setTranslateY(this.distanceTop + 'px');
        }
    };
    IonBottomDrawerComponent.prototype._handleDockedPanEnd = function (ev) {
        var absDeltaY = Math.abs(ev.deltaY);
        if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY < 0) {
            this.state = _drawer_state__WEBPACK_IMPORTED_MODULE_2__["DrawerState"].Top;
        }
        else if (absDeltaY > this._BOUNCE_DELTA && ev.deltaY > 0) {
            this.state = _drawer_state__WEBPACK_IMPORTED_MODULE_2__["DrawerState"].Bottom;
        }
        else {
            this._setTranslateY((this._platform.height() - this.dockedHeight) + 'px');
        }
    };
    IonBottomDrawerComponent.prototype._handleBottomPanEnd = function (ev) {
        if (-ev.deltaY > this._BOUNCE_DELTA) {
            this.state = _drawer_state__WEBPACK_IMPORTED_MODULE_2__["DrawerState"].Docked;
        }
        else {
            this._setTranslateY('calc(100vh - ' + this.minimumHeight + 'px)');
        }
    };
    IonBottomDrawerComponent.prototype._handlePan = function (ev) {
        var pointerY = ev.center.y;
        this._renderer.setStyle(this._element.nativeElement, 'transition', 'none');
        if (pointerY > 0 && pointerY < this._platform.height()) {
            if (ev.additionalEvent === 'panup' || ev.additionalEvent === 'pandown') {
                var newTop = this._startPositionTop + ev.deltaY;
                if (newTop >= this.distanceTop) {
                    this._setTranslateY(newTop + 'px');
                }
                else if (newTop < this.distanceTop) {
                    this._setTranslateY(this.distanceTop + 'px');
                }
                if (newTop > this._platform.height() - this.minimumHeight) {
                    this._setTranslateY((this._platform.height() - this.minimumHeight) + 'px');
                }
            }
        }
    };
    IonBottomDrawerComponent.prototype._setTranslateY = function (value) {
        var _this = this;
        this._domCtrl.write(function () {
            _this._renderer.setStyle(_this._element.nativeElement, 'transform', 'translateY(' + value + ')');
        });
    };
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Number)
    ], IonBottomDrawerComponent.prototype, "dockedHeight", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], IonBottomDrawerComponent.prototype, "shouldBounce", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Boolean)
    ], IonBottomDrawerComponent.prototype, "disableDrag", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Number)
    ], IonBottomDrawerComponent.prototype, "distanceTop", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", String)
    ], IonBottomDrawerComponent.prototype, "transition", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Number)
    ], IonBottomDrawerComponent.prototype, "state", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Input"])(),
        __metadata("design:type", Number)
    ], IonBottomDrawerComponent.prototype, "minimumHeight", void 0);
    __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Output"])(),
        __metadata("design:type", _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"])
    ], IonBottomDrawerComponent.prototype, "stateChange", void 0);
    IonBottomDrawerComponent = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Component"])({
            selector: 'ion-bottom-drawer',
            template: __webpack_require__(/*! ./ion-bottom-drawer.html */ "./src/modules/ion-bottom-drawer/ion-bottom-drawer.html"),
            styles: [__webpack_require__(/*! ./ion-bottom-drawer.scss */ "./src/modules/ion-bottom-drawer/ion-bottom-drawer.scss")]
        }),
        __metadata("design:paramtypes", [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ElementRef"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["Renderer2"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_1__["DomController"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_1__["Platform"]])
    ], IonBottomDrawerComponent);
    return IonBottomDrawerComponent;
}());



/***/ }),

/***/ "./src/providers/ble.ts":
/*!******************************!*\
  !*** ./src/providers/ble.ts ***!
  \******************************/
/*! exports provided: BLEProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BLEProvider", function() { return BLEProvider; });
/* harmony import */ var _localdb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./localdb */ "./src/providers/localdb.ts");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _ionic_native_ble_ngx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic-native/ble/ngx */ "./node_modules/@ionic-native/ble/ngx/index.js");
/* harmony import */ var _ionic_native_open_native_settings_ngx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ionic-native/open-native-settings/ngx */ "./node_modules/@ionic-native/open-native-settings/ngx/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
/* harmony import */ var _loading__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./loading */ "./src/providers/loading.ts");
/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./data */ "./src/providers/data.ts");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/index.js");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(date_fns__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var _ionic_native_local_notifications_ngx__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @ionic-native/local-notifications/ngx */ "./node_modules/@ionic-native/local-notifications/ngx/index.js");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};











var BLEProvider = /** @class */ (function () {
    function BLEProvider(toastCtrl, alertCtrl, ble, openNativeSettings, ngZone, loading, platform, data, localDb, localNotifications) {
        this.toastCtrl = toastCtrl;
        this.alertCtrl = alertCtrl;
        this.ble = ble;
        this.openNativeSettings = openNativeSettings;
        this.ngZone = ngZone;
        this.loading = loading;
        this.platform = platform;
        this.data = data;
        this.localDb = localDb;
        this.localNotifications = localNotifications;
        this.devices = [];
        this.peripherals = [];
        // newDeviceSub: Subscription;
        this.newDeviceChanged = new rxjs__WEBPACK_IMPORTED_MODULE_5__["Subject"]();
        this.deviceIsRunning = [];
        this.deviceIsRunningChanged = new rxjs__WEBPACK_IMPORTED_MODULE_5__["BehaviorSubject"](null);
        this.oldDeviceLength = 0;
        // bleAdvertisement = ['company id, 2B']['firmware version, 2B']['"SHOWER" magic string to id shower sensor, 6B']
        // ['Runtime shower runtime in seconds, 2B']['Temperature water temp where 1 unit is 0.1C, 2B']
        // ['Water how many littres in this session, 2B']['Shower id shower id number, 1B'];
        // characteristicContent = ['runtime, 4B']['water 4B']['energy 8B']['boot count, 2B'];
        this.showerDevice = {
            serviceUUID: '00001523-1212-efde-1523-785feabcd123',
            cumulative: '00001526-1212-efde-1523-785feabcd123',
            conifg: '00001524-1212-efde-1523-785feabcd123',
            reset: ' 0x FF FF FF FF'
        };
        this.deviceIds = [];
        this.ratings = new Map();
        this.ratingChanged = new rxjs__WEBPACK_IMPORTED_MODULE_5__["BehaviorSubject"](null);
        this.cumulativeDataReadChanged = new rxjs__WEBPACK_IMPORTED_MODULE_5__["BehaviorSubject"](null);
        this.deviceWasPaused = new Map();
        this.previousSessions = new Map();
    }
    BLEProvider.prototype.startAddDeviceScan = function () {
        var _this = this;
        console.log('startAddDeviceScan');
        this.ngZone.runOutsideAngular(function () {
            _this.ble.startScanWithOptions([], {
                reportDuplicates: false
            }).subscribe(function (device) {
                // console.log(device);
                _this.addDeviceToUsersDevices(device);
            }, function (error) {
                console.log('error', error);
            });
            setTimeout(function () {
                _this.ble.stopScan().then(function () {
                    // console.log('scan stopped');
                });
            }, 4500);
        });
    };
    BLEProvider.prototype.addDeviceToUsersDevices = function (device) {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            if (device.name === 'SHOWER' && device.id && device.rssi) {
                console.log('device', device);
                var humanReadlableData = void 0;
                if (_this.platform.is('android')) {
                    var parsed = _this.parseAdvertisingData(device.advertising);
                    console.log('parsed', parsed);
                    var data = parsed['0xff'];
                    humanReadlableData = _this.onReceivedDataChange(data);
                    console.log('humanReadlableData', humanReadlableData);
                    if (!humanReadlableData.id) {
                        return;
                    }
                }
                else if (_this.platform.is('ios')) {
                    var mfgData = new Uint8Array(device.advertising.kCBAdvDataManufacturerData);
                    console.log('Manufacturer Data is', mfgData);
                    var data = mfgData.buffer;
                    humanReadlableData = _this.onReceivedDataChange(data);
                    if (!humanReadlableData.id) {
                        return;
                    }
                }
                device.data = humanReadlableData;
                if (_this.deviceIds.map(function (item) { return item.id; }).indexOf(humanReadlableData.id) < 0) {
                    _this.deviceIds.push(humanReadlableData);
                    // advertisementData: AdvertisementData, bleDevice: BleDevice
                    _this.newDeviceChanged.next({
                        advertisementData: __assign({}, humanReadlableData),
                        bleDevice: __assign({}, device)
                    });
                }
                else {
                    console.warn('device is allreayd in the list');
                }
            }
        });
    };
    BLEProvider.prototype.resetAddDevices = function () {
        this.deviceIds = [];
    };
    BLEProvider.prototype.addIdsToDeviceIds = function (ids) {
        for (var _i = 0, ids_1 = ids; _i < ids_1.length; _i++) {
            var id = ids_1[_i];
            if (this.deviceIds.indexOf(id) < 0) {
                var advData = {
                    cost: 0,
                    energy: 0,
                    gasAmount: 0,
                    id: id,
                    runtime: 0,
                    temp: 0,
                    water: 0
                };
                this.deviceIds.push(advData);
            }
        }
    };
    /**
     * resetCumulativeData
     * @param deviceId
     * @param serviceUUID
     * @param characteristic
     */
    BLEProvider.prototype.resetCumulativeData = function (deviceId) {
        return __awaiter(this, void 0, void 0, function () {
            var resetPayload, writeResponse, error_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        resetPayload = new Uint8Array([
                            255, 255, 255, 255
                        ]);
                        return [4 /*yield*/, this.ble.write(deviceId, this.showerDevice.serviceUUID, this.showerDevice.cumulative, resetPayload.buffer)];
                    case 1:
                        writeResponse = _a.sent();
                        return [2 /*return*/, writeResponse];
                    case 2:
                        error_1 = _a.sent();
                        throw error_1;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    /**
     * startRefreshScan
     */
    BLEProvider.prototype.startRefreshScan = function () {
        // console.log('startRefreshScan');
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            if (_this.platform.is('cordova')) {
                // console.log('startRefreshScan 2' );
                var selector = function (x) { return x.id; };
                var throttleTimeout_1 = 1000;
                _this.ble.startScanWithOptions([], {
                    reportDuplicates: true
                })
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["groupBy"])(selector), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["mergeMap"])(function (group$) { return group$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["throttleTime"])(throttleTimeout_1)); }))
                    .subscribe(function (device) {
                    // console.log('device', device);
                    _this.onDeviceDiscovered(device);
                }, function (error) {
                    console.log('error', error);
                });
                // const self = this;
                setTimeout(function () {
                    _this.ble.stopScan().then(function () {
                        // console.log('scan stopped');
                    });
                }, 9000);
            }
        });
    };
    /**
     * Scan BLE devices
     */
    BLEProvider.prototype.scan = function () {
        var _this = this;
        this.ngZone.run(function () {
            console.log('scan()');
            _this.ble.isEnabled().then(function () {
                _this.ble.scan([], 1).subscribe(function (device) { return _this.onDeviceDiscovered(device); }, function (error) { return _this.scanError(error); });
            }).catch(function () { return __awaiter(_this, void 0, void 0, function () {
                return __generator(this, function (_a) {
                    console.log('BLE not enabled');
                    return [2 /*return*/];
                });
            }); });
            _this.ble.stopScan();
        });
    };
    /**
     * Device discovered
     * @param device
     */
    BLEProvider.prototype.onDeviceDiscovered = function (device) {
        var _this = this;
        this.ngZone.runOutsideAngular(function () {
            if (device.name === 'SHOWER' && device.id && device.rssi) {
                var humanReadlableData_1;
                if (_this.platform.is('android') && device.advertising) {
                    var parsed = _this.parseAdvertisingData(device.advertising);
                    var data = parsed['0xff'];
                    humanReadlableData_1 = _this.onReceivedDataChange(data);
                }
                else if (_this.platform.is('ios') && device.advertising && device.advertising.kCBAdvDataManufacturerData) {
                    var mfgData = new Uint8Array(device.advertising.kCBAdvDataManufacturerData);
                    var data = mfgData.buffer;
                    humanReadlableData_1 = _this.onReceivedDataChange(data);
                }
                if (_this.data.user.devices && _this.data.user.devices.length > 0) {
                    var deviceIndex_1 = _this.data.user.devices.findIndex(function (item) { return item.id === humanReadlableData_1.id; });
                    if (deviceIndex_1 >= 0) {
                        _this.ngZone.run(function () {
                            if (_this.deviceWasPaused.get(humanReadlableData_1.id)) {
                                var previous = _this.previousSessions.get(humanReadlableData_1.id);
                                if (previous && humanReadlableData_1 && humanReadlableData_1.runtime >= previous.runtime) {
                                    _this.data.user.devices[deviceIndex_1].advertisementData.cost = humanReadlableData_1.cost;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.energy = humanReadlableData_1.energy;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.gasAmount = humanReadlableData_1.gasAmount;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.runtime = humanReadlableData_1.runtime;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.temp = humanReadlableData_1.temp;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.water = humanReadlableData_1.water;
                                }
                                else {
                                    _this.data.user.devices[deviceIndex_1].advertisementData.cost = _this.previousSessions.get(humanReadlableData_1.id).cost + humanReadlableData_1.cost;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.energy = _this.previousSessions.get(humanReadlableData_1.id).energy + humanReadlableData_1.energy;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.gasAmount = _this.previousSessions.get(humanReadlableData_1.id).gasAmount + humanReadlableData_1.gasAmount;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.runtime = _this.previousSessions.get(humanReadlableData_1.id).runtime + humanReadlableData_1.runtime;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.temp = humanReadlableData_1.temp;
                                    _this.data.user.devices[deviceIndex_1].advertisementData.water = _this.previousSessions.get(humanReadlableData_1.id).water + humanReadlableData_1.water;
                                }
                                var newRating = _this.getRating(_this.data.user.devices[deviceIndex_1].advertisementData.cost);
                                _this.ratings.set(_this.data.user.devices[deviceIndex_1].advertisementData.id, newRating);
                                _this.ratingChanged.next(_this.ratings);
                            }
                            else {
                                _this.data.user.devices[deviceIndex_1].advertisementData = __assign({}, humanReadlableData_1);
                                var newRating = _this.getRating(_this.data.user.devices[deviceIndex_1].advertisementData.cost);
                                _this.ratings.set(_this.data.user.devices[deviceIndex_1].advertisementData.id, newRating);
                                _this.ratingChanged.next(_this.ratings);
                            }
                            if (!_this.deviceIsRunning.some(function (item) { return item.deviceId === humanReadlableData_1.id; })) {
                                _this.deviceIsRunning.push({
                                    isRunning: true,
                                    lastTs: Date.now(),
                                    deviceId: humanReadlableData_1.id
                                });
                            }
                            else {
                                var deviceRunningIndex = _this.deviceIsRunning.findIndex(function (item) { return item.deviceId === humanReadlableData_1.id; });
                                if (deviceRunningIndex < 0) {
                                    return;
                                }
                                _this.deviceIsRunning[deviceRunningIndex].deviceId = humanReadlableData_1.id;
                                _this.deviceIsRunning[deviceRunningIndex].lastTs = Date.now();
                                _this.deviceIsRunning[deviceRunningIndex].isRunning = true;
                                _this.deviceIsRunningChanged.next({
                                    isRunning: true,
                                    lastTs: Date.now(),
                                    deviceId: humanReadlableData_1.id
                                });
                            }
                        });
                        if (!_this.devices.some(function (item) { return item.id === device.id; })) {
                            _this.devices.push(device);
                            _this.ble.connect(device.id).subscribe(function (peripheral) { return __awaiter(_this, void 0, void 0, function () {
                                var cumulativeData, previousCumulativeData, parsedCumulativeData, msg, dateNow, previousMeasurement, measurement, currentDay, startTs, endTs, measurementDeviceClosed, dc;
                                return __generator(this, function (_a) {
                                    switch (_a.label) {
                                        case 0:
                                            if (!peripheral) return [3 /*break*/, 14];
                                            return [4 /*yield*/, this.ble.read(peripheral.id, this.showerDevice.serviceUUID, this.showerDevice.cumulative)];
                                        case 1:
                                            cumulativeData = _a.sent();
                                            return [4 /*yield*/, this.localDb.getPreviousMeasurement(humanReadlableData_1.id)];
                                        case 2:
                                            previousCumulativeData = _a.sent();
                                            parsedCumulativeData = this.parseBLEData(cumulativeData);
                                            if (this.data.user.allowNotifications) {
                                                msg = 'Shower ' + this.data.user.devices[deviceIndex_1].name + ' is running';
                                                this.localNotifications.schedule({
                                                    id: this.data.user.devices[deviceIndex_1].id,
                                                    title: 'Streamsave',
                                                    text: msg,
                                                    sound: null,
                                                    vibrate: true,
                                                    foreground: true,
                                                    trigger: {
                                                        in: 5,
                                                        unit: _ionic_native_local_notifications_ngx__WEBPACK_IMPORTED_MODULE_10__["ELocalNotificationTriggerUnit"].SECOND
                                                    },
                                                    icon: 'res://icon.png',
                                                    smallIcon: 'res://icon_small',
                                                });
                                            }
                                            if (previousCumulativeData.runtime > parsedCumulativeData.runtime || previousCumulativeData.water > parsedCumulativeData.water || previousCumulativeData.energy > parsedCumulativeData.energy || previousCumulativeData.bootCount > parsedCumulativeData.bootCount) {
                                                console.error('previousCumulativeData > parsedCumulativeData');
                                            }
                                            if (!(parsedCumulativeData.runtime && parsedCumulativeData.water && parsedCumulativeData.energy && parsedCumulativeData.bootCount)) return [3 /*break*/, 12];
                                            this.data.user.devices[deviceIndex_1].cumulativeData = __assign({}, parsedCumulativeData);
                                            dateNow = Object(date_fns__WEBPACK_IMPORTED_MODULE_9__["getTime"])(Object(date_fns__WEBPACK_IMPORTED_MODULE_9__["endOfDay"])(Date.now()));
                                            previousMeasurement = {
                                                runtime: parsedCumulativeData.runtime,
                                                water: parsedCumulativeData.water,
                                                energy: parsedCumulativeData.energy,
                                                bootCount: parsedCumulativeData.bootCount,
                                                deviceId: this.data.user.devices[deviceIndex_1].id,
                                                startTs: this.data.previousTs,
                                                endTs: dateNow,
                                                id: null
                                            };
                                            measurement = {
                                                runtime: parsedCumulativeData.runtime - previousCumulativeData.runtime,
                                                water: parsedCumulativeData.water - previousCumulativeData.water,
                                                energy: parsedCumulativeData.energy - previousCumulativeData.energy,
                                                bootCount: parsedCumulativeData.bootCount - previousCumulativeData.bootCount,
                                                deviceId: this.data.user.devices[deviceIndex_1].id,
                                                startTs: this.data.previousTs,
                                                endTs: dateNow,
                                                id: null
                                            };
                                            if (!(measurement.runtime > 0 && measurement.water > 0 && measurement.energy > 0 && measurement.bootCount > 0)) return [3 /*break*/, 11];
                                            return [4 /*yield*/, this.localDb.getCurrentDayMeasurement(measurement.deviceId, measurement.endTs)];
                                        case 3:
                                            currentDay = _a.sent();
                                            if (!(currentDay && currentDay.length > 0)) return [3 /*break*/, 6];
                                            return [4 /*yield*/, this.localDb.updateMeasurement(measurement)];
                                        case 4:
                                            _a.sent();
                                            return [4 /*yield*/, this.localDb.updatePreviousMeasurement(previousMeasurement)];
                                        case 5:
                                            _a.sent();
                                            this.data.setPreviousTs(dateNow);
                                            this.cumulativeDataReadChanged.next(measurement.deviceId);
                                            return [3 /*break*/, 9];
                                        case 6: return [4 /*yield*/, this.localDb.addMeasurement(measurement)];
                                        case 7:
                                            _a.sent();
                                            return [4 /*yield*/, this.localDb.updatePreviousMeasurement(previousMeasurement)];
                                        case 8:
                                            _a.sent();
                                            this.data.setPreviousTs(dateNow);
                                            this.cumulativeDataReadChanged.next(measurement.deviceId);
                                            _a.label = 9;
                                        case 9:
                                            startTs = Object(date_fns__WEBPACK_IMPORTED_MODULE_9__["getTime"])(Object(date_fns__WEBPACK_IMPORTED_MODULE_9__["startOfDay"])(Date.now()));
                                            endTs = Object(date_fns__WEBPACK_IMPORTED_MODULE_9__["getTime"])(Object(date_fns__WEBPACK_IMPORTED_MODULE_9__["endOfDay"])(Date.now()));
                                            measurementDeviceClosed = {
                                                runtime: 0,
                                                water: 0,
                                                energy: 0,
                                                bootCount: 0,
                                                deviceId: device.id,
                                                startTs: startTs,
                                                endTs: endTs,
                                            };
                                            return [4 /*yield*/, this.localDb.updateDeviceClosedMeasurement(measurementDeviceClosed)];
                                        case 10:
                                            _a.sent();
                                            return [3 /*break*/, 12];
                                        case 11:
                                            console.error('Measurement negative values');
                                            _a.label = 12;
                                        case 12: return [4 /*yield*/, this.ble.disconnect(device.id)];
                                        case 13:
                                            dc = _a.sent();
                                            console.log('dc', dc);
                                            _a.label = 14;
                                        case 14: return [2 /*return*/];
                                    }
                                });
                            }); }, function (error) {
                                _this.handleError('Device disconnected unexpectedly');
                                console.log('error', error);
                            });
                        }
                    }
                }
            }
        });
    };
    /**
     * Set status message
     * @param message
     */
    BLEProvider.prototype.setStatus = function (message) {
        var _this = this;
        this.ngZone.run(function () {
            _this.statusMessage = message;
        });
    };
    /**
     * If location permission is denied, you'll end up here
     */
    BLEProvider.prototype.scanError = function (error) {
        this.setStatus('Error ' + error);
        this.showToast('Error scanning for Bluetooth low energy devices');
    };
    /**
     * Device selection
     * @param device
     */
    BLEProvider.prototype.deviceSelected = function (device) {
        var _this = this;
        this.loading.presentLoading(5000, 'Connecting to device');
        this.ble.connect(device.id).subscribe(function (peripheral) {
            _this.onConnected(peripheral);
            _this.loading.dismissLoading();
        }, function (peripheral) { return _this.onDeviceDisconnected(peripheral); });
    };
    /**
     * Peripheral connected
     */
    BLEProvider.prototype.onConnected = function (peripheral) {
        this.peripheral = peripheral;
        this.setStatus('Connected to ' + (peripheral.name || peripheral.id));
        console.log('this.peripheral', this.peripheral);
        this.getConnectStatus();
        // this.devices = [];
    };
    /**
     * Disconnect peripheral
     */
    BLEProvider.prototype.disconnect = function () {
        var _this = this;
        this.ble.disconnect(this.peripheral.id)
            .then(function (data) {
            console.log('good', data);
            _this.peripheral = null;
            _this.devices = [];
            _this.ble.stopScan();
            // this.testF();
            // good disconnect
            _this.getConnectStatus();
        })
            .catch(function (error) {
            console.error(error);
            // bad disconnect
        });
    };
    /**
     * When device is disconnected shot this toast
     */
    BLEProvider.prototype.onDeviceDisconnected = function (peripheral) {
        this.showToast('The peripheral unexpectedly disconnected');
        this.getConnectStatus();
    };
    /**
     * returns value if bluetooth is on or off or is devices is connected or not
     */
    BLEProvider.prototype.getConnectStatus = function () {
        var _this = this;
        this.ble.isEnabled().then(function () {
            if (_this.peripheral && _this.peripheral.id) {
                (_this.ble.isConnected(_this.peripheral.id)).then(function () {
                    _this.connectionStatus = 'connected';
                }, function () {
                    _this.connectionStatus = 'notConnected';
                });
            }
            else {
                _this.connectionStatus = 'notConnected';
            }
        }, function () {
            _this.connectionStatus = 'noBT';
        });
    };
    BLEProvider.prototype.parseAdvertisingData = function (buffer) {
        var length, type, data, i = 0, advertisementData = {};
        var bytes = new Uint8Array(buffer);
        while (length !== 0) {
            length = bytes[i] & 0xFF;
            i++;
            // decode type constants from https://www.bluetooth.org/en-us/specification/assigned-numbers/generic-access-profile
            type = bytes[i] & 0xFF;
            i++;
            data = bytes.slice(i, i + length - 1).buffer; // length includes type byte, but not length byte
            i += length - 2; // move to end of data
            i++;
            advertisementData[this.asHexString(type)] = data;
        }
        // console.log('advertisementData', advertisementData);
        return advertisementData;
    };
    // i must be < 256
    BLEProvider.prototype.asHexString = function (i) {
        var hex;
        hex = i.toString(16);
        // zero padding
        if (hex.length === 1) {
            hex = "0" + hex;
        }
        return "0x" + hex;
    };
    /**
     * Received data
     */
    BLEProvider.prototype.parseBLEData = function (buffer) {
        var data = new Uint8Array(buffer);
        // console.log('data', data);
        var dataView1 = new DataView(data.buffer);
        // console.log('dataview', dataView1);
        var value0 = dataView1.getUint32(0, true);
        var value1 = dataView1.getUint32(4, true);
        // const dataView2 = new DataView(buffer.buffer);
        var value2 = dataView1.getFloat64(8, true);
        // const dataView3 = new DataView(buffer.buffer);
        var value3 = dataView1.getUint16(16, true);
        // console.log('runtime', value0, 'water', value1, 'energy:', value2, 'bootcount:', value3);
        return {
            runtime: value0,
            water: value1,
            energy: value2,
            bootCount: value3
        };
    };
    /**
     * Received data
     */
    BLEProvider.prototype.onReceivedDataChange = function (buffer) {
        var data = new Uint8Array(buffer);
        // console.log('data', data);
        var debugBytes = '';
        for (var i = 0; i < data.byteLength; i++) {
            // debugBytes = debugBytes.concat(data[i].toString(16));
            // debugBytes = debugBytes.concat(",");
        }
        var dataView1 = new DataView(data.buffer);
        var value0 = dataView1.getUint16(9, false);
        var value1 = dataView1.getUint16(11, false);
        // const dataView2 = new DataView(buffer.buffer);
        var value2 = dataView1.getUint16(13, false);
        // const dataView3 = new DataView(buffer.buffer);
        var value3 = dataView1.getUint8(15);
        var t0 = 4; // cold water before heating
        var t = value1 * 0.1;
        var waterHeatCapacity = 4.1813; // J/gK
        var energy = value2 * (t - t0) * waterHeatCapacity / (3.6 * 1000);
        if (t < t0) {
            energy = 0;
        }
        var waterCost = value2 / 1000 * this.data.user.units.waterPrice; // water price €/cubic metre
        var energyCost; // € / kWh * energy amount
        var btu2kw = 0.2931 / 1000;
        var gasFt3 = energy / btu2kw / this.data.user.units.gas.heatContent;
        if (this.data.user.units.heatingMethod === 'electricity') {
            energyCost = energy * (this.data.user.units.electricity.kWhPrice / 100);
        }
        if (this.data.user.units.heatingMethod === 'gas') {
            energyCost = this.getGasCost(gasFt3);
        }
        var cost = waterCost + energyCost;
        // Kaasun määrä (ft3):
        // btu2kw = 0.2931/1000
        // kaasuFt3 = energiakWh / btu2kw / gasHeatContent
        return {
            runtime: value0,
            temp: value1 * 0.1,
            water: value2,
            id: value3,
            energy: energy,
            cost: cost,
            gasAmount: gasFt3
        };
    };
    BLEProvider.prototype.getGasCost = function (gasAmountFt3) {
        return (gasAmountFt3 / 100) * (this.data.user.units.gas.gasPrice / 100);
    };
    BLEProvider.prototype.getRating = function (consumption) {
        var emojiUrl;
        var emojiColor;
        var progress;
        if (consumption <= this.data.user.ranges.good) {
            emojiUrl = 'assets/icon/grin-regular.svg';
            emojiColor = '#42B771';
            progress = 25;
        }
        else if (consumption > this.data.user.ranges.good && consumption <= this.data.user.ranges.mediocre) {
            emojiUrl = 'assets/icon/meh-regular.svg';
            emojiColor = '#F4D41E';
            progress = 50;
        }
        else if (consumption >= this.data.user.ranges.needsImprovement) {
            emojiUrl = 'assets/icon/meh-regular.svg';
            emojiColor = '#E84652';
            progress = 75;
        }
        return {
            emojiColor: emojiColor,
            emojiUrl: emojiUrl,
            progress: progress
        };
    };
    /**
     * Show toast
     */
    BLEProvider.prototype.showToast = function (message) {
        return __awaiter(this, void 0, void 0, function () {
            var toast;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.toastCtrl.create({
                            message: message,
                            duration: 3000,
                            position: 'middle'
                        })];
                    case 1:
                        toast = _a.sent();
                        return [4 /*yield*/, toast.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    BLEProvider.prototype.handleError = function (errorMsg) {
        return __awaiter(this, void 0, void 0, function () {
            var alert;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0: return [4 /*yield*/, this.alertCtrl.create({
                            header: 'Something went wrong',
                            subHeader: errorMsg,
                            message: 'If the problem persists, try restarting the app and switching bluetooth off and on again.',
                            buttons: ['OK']
                        })];
                    case 1:
                        alert = _a.sent();
                        return [4 /*yield*/, alert.present()];
                    case 2:
                        _a.sent();
                        return [2 /*return*/];
                }
            });
        });
    };
    BLEProvider = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__["Injectable"])(),
        __metadata("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_2__["ToastController"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["AlertController"],
            _ionic_native_ble_ngx__WEBPACK_IMPORTED_MODULE_3__["BLE"],
            _ionic_native_open_native_settings_ngx__WEBPACK_IMPORTED_MODULE_4__["OpenNativeSettings"],
            _angular_core__WEBPACK_IMPORTED_MODULE_1__["NgZone"],
            _loading__WEBPACK_IMPORTED_MODULE_7__["LoadingProvider"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_2__["Platform"],
            _data__WEBPACK_IMPORTED_MODULE_8__["DataProvider"],
            _localdb__WEBPACK_IMPORTED_MODULE_0__["LocalDatabaseProvider"],
            _ionic_native_local_notifications_ngx__WEBPACK_IMPORTED_MODULE_10__["LocalNotifications"]])
    ], BLEProvider);
    return BLEProvider;
}());



/***/ }),

/***/ "./src/providers/data.ts":
/*!*******************************!*\
  !*** ./src/providers/data.ts ***!
  \*******************************/
/*! exports provided: DataProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataProvider", function() { return DataProvider; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _ionic_native_native_storage_ngx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ionic-native/native-storage/ngx */ "./node_modules/@ionic-native/native-storage/ngx/index.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var _models__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../models */ "./src/models/index.ts");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};

// import { AuthProvider } from './auth';




var DataProvider = /** @class */ (function () {
    function DataProvider(
    // private auth: AuthProvider
    nativeStorage, platform, ngZone) {
        var _this = this;
        this.nativeStorage = nativeStorage;
        this.platform = platform;
        this.ngZone = ngZone;
        this.user = new _models__WEBPACK_IMPORTED_MODULE_4__["User"](null, null, null, null, null, null);
        this.userChanged = new rxjs__WEBPACK_IMPORTED_MODULE_1__["BehaviorSubject"](new _models__WEBPACK_IMPORTED_MODULE_4__["User"](null, null, null, null, null, null));
        this.platform.ready().then(function () {
            if (_this.platform.is('cordova')) {
                _this.initPreviousTs();
                // this.initPreviousFromToSelection();
            }
        });
    }
    DataProvider.prototype.setPreviousTs = function (ts) {
        this.nativeStorage.setItem('previousTs', { previousTs: ts });
    };
    DataProvider.prototype.setPreviousFromToSelection = function (from, to) {
        this.nativeStorage.setItem('previousFromToSelection', { from: from, to: to });
    };
    DataProvider.prototype.resetDeviceAdvertisementData = function (deviceId) {
        var _this = this;
        var deviceIndex = this.user.devices.findIndex(function (item) { return item.id === deviceId; });
        if (deviceIndex < 0) {
            console.warn('no device found in user devices');
        }
        else {
            this.ngZone.run(function () {
                _this.user.devices[deviceIndex].advertisementData = null;
            });
            console.warn('advertisementData reset', this.user.devices[deviceIndex]);
        }
    };
    DataProvider.prototype.initPreviousTs = function () {
        return __awaiter(this, void 0, void 0, function () {
            var previousTs, data, error_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 6, , 7]);
                        console.log('initPreviousTs');
                        return [4 /*yield*/, this.nativeStorage.getItem('previousTs').catch(function (err) { return console.log('1 err', err); })];
                    case 1:
                        previousTs = _a.sent();
                        if (!previousTs) return [3 /*break*/, 2];
                        this.previousTs = previousTs.previousTs;
                        console.warn('1 this.previousTs', this.previousTs);
                        return [3 /*break*/, 5];
                    case 2: return [4 /*yield*/, this.nativeStorage.setItem('previousTs', { previousTs: Date.now() })];
                    case 3:
                        _a.sent();
                        return [4 /*yield*/, this.nativeStorage.getItem('previousTs')];
                    case 4:
                        data = _a.sent();
                        if (data) {
                            this.previousTs = data.previousTs;
                            console.warn('2 this.previousTs', this.previousTs);
                        }
                        _a.label = 5;
                    case 5: return [3 /*break*/, 7];
                    case 6:
                        error_1 = _a.sent();
                        throw error_1;
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    DataProvider.prototype.initPreviousCumulativeMeasurement = function () {
        return __awaiter(this, void 0, void 0, function () {
            var previousCumulativeMeasurement, firstMeasurement, stringified, data, error_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 6, , 7]);
                        console.log('initPreviousCumulativeMeasurement');
                        return [4 /*yield*/, this.nativeStorage.getItem('previousCumulativeMeasurement').catch(function (err) { return console.log('1 err', err); })];
                    case 1:
                        previousCumulativeMeasurement = _a.sent();
                        if (!previousCumulativeMeasurement) return [3 /*break*/, 2];
                        this.previousCumulativeMeasurement = previousCumulativeMeasurement.previousCumulativeMeasurement;
                        console.warn('1 this.previousCumulativeMeasurement', this.previousCumulativeMeasurement);
                        return [3 /*break*/, 5];
                    case 2:
                        firstMeasurement = {
                            runtime: 0,
                            water: 0,
                            energy: 0,
                            bootCount: 0,
                            deviceId: 0,
                            startTs: new Date().getTime(),
                            endTs: new Date().getTime(),
                            id: 0
                        };
                        stringified = JSON.stringify(firstMeasurement);
                        return [4 /*yield*/, this.nativeStorage.setItem('previousCumulativeMeasurement', { previousCumulativeMeasurement: stringified })];
                    case 3:
                        _a.sent();
                        return [4 /*yield*/, this.nativeStorage.getItem('previousCumulativeMeasurement')];
                    case 4:
                        data = _a.sent();
                        if (data) {
                            this.previousCumulativeMeasurement = data.previousCumulativeMeasurement;
                            console.warn('2 this.previousCumulativeMeasurement', this.previousCumulativeMeasurement);
                        }
                        _a.label = 5;
                    case 5: return [3 /*break*/, 7];
                    case 6:
                        error_2 = _a.sent();
                        throw error_2;
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    DataProvider.prototype.initPreviousFromToSelection = function () {
        return __awaiter(this, void 0, void 0, function () {
            var previousFromToSelection, data, error_3;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 6, , 7]);
                        console.log('initPreviousFromToSelection');
                        return [4 /*yield*/, this.nativeStorage.getItem('previousFromToSelection').catch(function (err) { return console.log('1 err', err); })];
                    case 1:
                        previousFromToSelection = _a.sent();
                        if (!(previousFromToSelection && previousFromToSelection.from && previousFromToSelection.to)) return [3 /*break*/, 2];
                        this.previousFromToSelection = previousFromToSelection;
                        console.warn('1 this.previousFromToSelection', this.previousFromToSelection);
                        return [2 /*return*/, this.previousFromToSelection];
                    case 2: return [4 /*yield*/, this.nativeStorage.setItem('previousFromToSelection', { from: Date.now() - (1000 * 60 * 60 * 24 * 30), to: Date.now() })];
                    case 3:
                        _a.sent();
                        return [4 /*yield*/, this.nativeStorage.getItem('previousFromToSelection')];
                    case 4:
                        data = _a.sent();
                        if (data) {
                            this.previousFromToSelection = data;
                            console.warn('2 this.previousFromToSelection', this.previousFromToSelection);
                            return [2 /*return*/, this.previousFromToSelection];
                        }
                        _a.label = 5;
                    case 5: return [3 /*break*/, 7];
                    case 6:
                        error_3 = _a.sent();
                        throw error_3;
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    DataProvider = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_ionic_native_native_storage_ngx__WEBPACK_IMPORTED_MODULE_2__["NativeStorage"],
            _ionic_angular__WEBPACK_IMPORTED_MODULE_3__["Platform"],
            _angular_core__WEBPACK_IMPORTED_MODULE_0__["NgZone"]])
    ], DataProvider);
    return DataProvider;
}());



/***/ }),

/***/ "./src/providers/index.ts":
/*!********************************!*\
  !*** ./src/providers/index.ts ***!
  \********************************/
/*! exports provided: BLEProvider, LoadingProvider, DataProvider, LocalDatabaseProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _ble__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ble */ "./src/providers/ble.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BLEProvider", function() { return _ble__WEBPACK_IMPORTED_MODULE_0__["BLEProvider"]; });

/* harmony import */ var _loading__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./loading */ "./src/providers/loading.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LoadingProvider", function() { return _loading__WEBPACK_IMPORTED_MODULE_1__["LoadingProvider"]; });

/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./data */ "./src/providers/data.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DataProvider", function() { return _data__WEBPACK_IMPORTED_MODULE_2__["DataProvider"]; });

/* harmony import */ var _localdb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./localdb */ "./src/providers/localdb.ts");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LocalDatabaseProvider", function() { return _localdb__WEBPACK_IMPORTED_MODULE_3__["LocalDatabaseProvider"]; });

// export { DatabaseProvider } from './database';
// export { AuthProvider } from './auth';






/***/ }),

/***/ "./src/providers/loading.ts":
/*!**********************************!*\
  !*** ./src/providers/loading.ts ***!
  \**********************************/
/*! exports provided: LoadingProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LoadingProvider", function() { return LoadingProvider; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};


var LoadingProvider = /** @class */ (function () {
    function LoadingProvider(loadingCtrl) {
        this.loadingCtrl = loadingCtrl;
    }
    /**
     *
     * @param duration optional duration in ms, in not set will use 3000ms default value
     * @param message optional message to be shown in loading spinner
     */
    LoadingProvider.prototype.presentLoading = function (duration, message) {
        return __awaiter(this, void 0, void 0, function () {
            var _a;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = this;
                        return [4 /*yield*/, this.loadingCtrl.create({
                                message: message ? message : '',
                                duration: duration ? duration : 3000
                            })];
                    case 1:
                        _a.loading = _b.sent();
                        return [4 /*yield*/, this.loading.present()];
                    case 2: return [2 /*return*/, _b.sent()];
                }
            });
        });
    };
    LoadingProvider.prototype.dismissLoading = function () {
        return __awaiter(this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (this.loading) {
                    this.loading.dismiss();
                }
                return [2 /*return*/];
            });
        });
    };
    LoadingProvider = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_1__["LoadingController"]])
    ], LoadingProvider);
    return LoadingProvider;
}());



/***/ }),

/***/ "./src/providers/localdb.ts":
/*!**********************************!*\
  !*** ./src/providers/localdb.ts ***!
  \**********************************/
/*! exports provided: LocalDatabaseProvider */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LocalDatabaseProvider", function() { return LocalDatabaseProvider; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
/* harmony import */ var _ionic_angular__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @ionic/angular */ "./node_modules/@ionic/angular/dist/fesm5.js");
/* harmony import */ var typeorm__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! typeorm */ "./node_modules/typeorm/browser/index.js");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./data */ "./src/providers/data.ts");
/* harmony import */ var _entities_measurement__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./../entities/measurement */ "./src/entities/measurement.ts");
/* harmony import */ var _entities_user__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../entities/user */ "./src/entities/user.ts");
/* harmony import */ var _entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../entities/prevousMeasurement */ "./src/entities/prevousMeasurement.ts");
/* harmony import */ var _entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../entities/deviceClosedMeasurement */ "./src/entities/deviceClosedMeasurement.ts");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! lodash */ "./node_modules/lodash/lodash.js");
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var safe_json_stringify__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! safe-json-stringify */ "./node_modules/safe-json-stringify/index.js");
/* harmony import */ var safe_json_stringify__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(safe_json_stringify__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ "./node_modules/date-fns/index.js");
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(date_fns__WEBPACK_IMPORTED_MODULE_11__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (undefined && undefined.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};














var LocalDatabaseProvider = /** @class */ (function () {
    function LocalDatabaseProvider(platform, data) {
        this.platform = platform;
        this.data = data;
        this.dbLoaded = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](false);
    }
    LocalDatabaseProvider.prototype.init = function () {
        return __awaiter(this, void 0, void 0, function () {
            var _this = this;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (!this.platform.is('cordova')) return [3 /*break*/, 2];
                        // Running on device or emulator
                        return [4 /*yield*/, Object(typeorm__WEBPACK_IMPORTED_MODULE_2__["createConnection"])({
                                type: 'cordova',
                                database: 'streamsave_db',
                                location: 'default',
                                logging: ['error'],
                                synchronize: true,
                                entities: [
                                    _entities_user__WEBPACK_IMPORTED_MODULE_6__["UserEntity"],
                                    _entities_measurement__WEBPACK_IMPORTED_MODULE_5__["MeasurementEntity"],
                                    _entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__["PreviousMeasurementEntity"],
                                    _entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__["DeviceClosedMeasurementEntity"]
                                    // Category,
                                    // Post
                                ]
                            }).then(function (connection) { return __awaiter(_this, void 0, void 0, function () {
                                return __generator(this, function (_a) {
                                    this.initConnection(connection);
                                    return [2 /*return*/];
                                });
                            }); }).catch(function (err) {
                                throw err;
                            })];
                    case 1:
                        // Running on device or emulator
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 2: 
                    // Running app in browser
                    return [4 /*yield*/, Object(typeorm__WEBPACK_IMPORTED_MODULE_2__["createConnection"])({
                            type: 'sqljs',
                            autoSave: true,
                            location: 'browser',
                            logging: ['error'],
                            synchronize: true,
                            entities: [
                                _entities_user__WEBPACK_IMPORTED_MODULE_6__["UserEntity"],
                                _entities_measurement__WEBPACK_IMPORTED_MODULE_5__["MeasurementEntity"],
                                _entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__["PreviousMeasurementEntity"],
                                _entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__["DeviceClosedMeasurementEntity"]
                                // Category,
                                // Post
                            ]
                        }).then(function (connection) { return __awaiter(_this, void 0, void 0, function () {
                            return __generator(this, function (_a) {
                                this.initConnection(connection);
                                return [2 /*return*/];
                            });
                        }); }).catch(function (err) {
                            throw err;
                        })];
                    case 3:
                        // Running app in browser
                        _a.sent();
                        _a.label = 4;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.initConnection = function (connection) {
        return __awaiter(this, void 0, void 0, function () {
            var userRepo, savedUser, measurementsRepo, measurements;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        if (connection && connection.isConnected) {
                            this.connection = connection;
                        }
                        console.log('initConnection');
                        userRepo = connection.getRepository(_entities_user__WEBPACK_IMPORTED_MODULE_6__["UserEntity"]);
                        return [4 /*yield*/, userRepo.findOne(1)];
                    case 1:
                        savedUser = _a.sent();
                        measurementsRepo = connection.getRepository(_entities_measurement__WEBPACK_IMPORTED_MODULE_5__["MeasurementEntity"]);
                        return [4 /*yield*/, measurementsRepo.find({
                                order: {
                                    id: 'DESC'
                                }
                            })];
                    case 2:
                        measurements = _a.sent();
                        console.log('all measurements', measurements);
                        console.log(savedUser);
                        if (!!savedUser) return [3 /*break*/, 4];
                        return [4 /*yield*/, this.addUser(connection)];
                    case 3:
                        _a.sent();
                        return [3 /*break*/, 5];
                    case 4:
                        this.data.user['units'] = savedUser.units ? JSON.parse(savedUser.units) : '';
                        this.data.user['ranges'] = savedUser.ranges ? JSON.parse(savedUser.ranges) : '';
                        this.data.user['devices'] = savedUser.devices ? JSON.parse(savedUser.devices) : '';
                        this.data.user['allowNotifications'] = savedUser.allowNotifications ? savedUser.allowNotifications : false;
                        this.dbLoaded.next(true);
                        _a.label = 5;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.addUser = function (connection) {
        return __awaiter(this, void 0, void 0, function () {
            var user, gas, electricity, units, ranges, userRepo, savedUser, error_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        user = new _entities_user__WEBPACK_IMPORTED_MODULE_6__["UserEntity"]();
                        user.email = 'user@example.com';
                        user.allowNotifications = false;
                        user.devices = '';
                        gas = {
                            gasPrice: 1,
                            heatContent: 1024
                        };
                        electricity = {
                            kWhPrice: 150
                        };
                        units = {
                            water: 'litres',
                            temperature: 'c',
                            currency: 'eur',
                            waterPrice: 5,
                            heatingMethod: 'electricity',
                            electricity: electricity,
                            gas: gas
                        };
                        user.units = safe_json_stringify__WEBPACK_IMPORTED_MODULE_10__(__assign({}, units));
                        ranges = {
                            good: 0.50,
                            mediocre: 0.8,
                            needsImprovement: 0.8,
                            eventNotificationLimit: 'no notification',
                            weeklyLimit: 15,
                            monthlyLimit: 60,
                        };
                        user.ranges = safe_json_stringify__WEBPACK_IMPORTED_MODULE_10__(__assign({}, ranges));
                        userRepo = connection.getRepository(_entities_user__WEBPACK_IMPORTED_MODULE_6__["UserEntity"]);
                        return [4 /*yield*/, userRepo.save(user)];
                    case 1:
                        _a.sent();
                        return [4 /*yield*/, userRepo.findOne(1)];
                    case 2:
                        savedUser = _a.sent();
                        this.data.user['units'] = savedUser.units ? JSON.parse(savedUser.units) : '';
                        this.data.user['ranges'] = savedUser.ranges ? JSON.parse(savedUser.ranges) : '';
                        this.data.user['devices'] = savedUser.devices ? JSON.parse(savedUser.devices) : '';
                        this.dbLoaded.next(true);
                        console.log('user saved', savedUser);
                        return [3 /*break*/, 4];
                    case 3:
                        error_1 = _a.sent();
                        throw error_1;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.updateUser = function (user) {
        return __awaiter(this, void 0, void 0, function () {
            var userRepo, userToUpdate, error_2;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 3, , 4]);
                        userRepo = this.connection.getRepository(_entities_user__WEBPACK_IMPORTED_MODULE_6__["UserEntity"]);
                        return [4 /*yield*/, userRepo.findOne(1)];
                    case 1:
                        userToUpdate = _a.sent();
                        userToUpdate.allowNotifications = user.allowNotifications ? user.allowNotifications : false;
                        userToUpdate.devices = user.devices && user.devices.length > 0 ? safe_json_stringify__WEBPACK_IMPORTED_MODULE_10__(user.devices) : '';
                        userToUpdate.units = user.units ? safe_json_stringify__WEBPACK_IMPORTED_MODULE_10__(user.units) : '';
                        userToUpdate.ranges = user.ranges ? safe_json_stringify__WEBPACK_IMPORTED_MODULE_10__(user.ranges) : '';
                        return [4 /*yield*/, userRepo.save(userToUpdate)];
                    case 2:
                        _a.sent();
                        this.data.user['units'] = userToUpdate.units ? JSON.parse(userToUpdate.units) : '';
                        this.data.user['ranges'] = userToUpdate.ranges ? JSON.parse(userToUpdate.ranges) : '';
                        this.data.user['devices'] = userToUpdate.devices ? JSON.parse(userToUpdate.devices) : '';
                        return [3 /*break*/, 4];
                    case 3:
                        error_2 = _a.sent();
                        throw error_2;
                    case 4: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.addDeviceClosedMeasurement = function (deviceId) {
        return __awaiter(this, void 0, void 0, function () {
            var measurementEntity, repo, error_3;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        measurementEntity = new _entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__["DeviceClosedMeasurementEntity"]();
                        measurementEntity.bootCount = 0;
                        measurementEntity.deviceId = deviceId;
                        measurementEntity.energy = 0;
                        measurementEntity.runtime = 0;
                        measurementEntity.water = 0;
                        measurementEntity.startTs = 0;
                        measurementEntity.endTs = 0;
                        repo = this.connection.getRepository(_entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__["DeviceClosedMeasurementEntity"]);
                        return [4 /*yield*/, repo.save(measurementEntity)];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        error_3 = _a.sent();
                        throw error_3;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.updateDeviceClosedMeasurement = function (measurement) {
        return __awaiter(this, void 0, void 0, function () {
            var measurementRepo, measurementToUpdate, newMeasurement, savedMeasurement, error_4;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 6, , 7]);
                        measurementRepo = this.connection.getRepository(_entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__["DeviceClosedMeasurementEntity"]);
                        return [4 /*yield*/, measurementRepo.findOne({
                                where: {
                                    deviceId: measurement.deviceId,
                                }
                            })];
                    case 1:
                        measurementToUpdate = _a.sent();
                        if (!measurementToUpdate) return [3 /*break*/, 4];
                        newMeasurement = {
                            runtime: measurement.runtime,
                            water: measurement.water,
                            energy: measurement.energy,
                            bootCount: measurement.bootCount,
                            deviceId: measurement.deviceId,
                            startTs: measurement.startTs,
                            endTs: measurement.endTs,
                        };
                        // await measurementRepo.save(measurementToUpdate);
                        return [4 /*yield*/, measurementRepo.update(measurementToUpdate.deviceId, newMeasurement)];
                    case 2:
                        // await measurementRepo.save(measurementToUpdate);
                        _a.sent();
                        return [4 /*yield*/, measurementRepo.findOne({
                                where: {
                                    deviceId: measurement.deviceId,
                                }
                            })];
                    case 3:
                        savedMeasurement = _a.sent();
                        return [2 /*return*/, savedMeasurement];
                    case 4:
                        console.warn('no measurement to update');
                        _a.label = 5;
                    case 5: return [3 /*break*/, 7];
                    case 6:
                        error_4 = _a.sent();
                        throw error_4;
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.getDeviceClosedMeasurement = function (deviceIds) {
        return __awaiter(this, void 0, void 0, function () {
            var previousMeasurementRepo, allMeasurements, _i, deviceIds_1, id, previousMeasurementRepoToGet, error_5;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        previousMeasurementRepo = this.connection.getRepository(_entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__["DeviceClosedMeasurementEntity"]);
                        allMeasurements = [];
                        _i = 0, deviceIds_1 = deviceIds;
                        _a.label = 1;
                    case 1:
                        if (!(_i < deviceIds_1.length)) return [3 /*break*/, 4];
                        id = deviceIds_1[_i];
                        return [4 /*yield*/, previousMeasurementRepo.findOne({
                                where: {
                                    deviceId: id
                                }
                            })];
                    case 2:
                        previousMeasurementRepoToGet = _a.sent();
                        if (previousMeasurementRepoToGet) {
                            allMeasurements.push(previousMeasurementRepoToGet);
                        }
                        _a.label = 3;
                    case 3:
                        _i++;
                        return [3 /*break*/, 1];
                    case 4: return [2 /*return*/, allMeasurements];
                    case 5:
                        error_5 = _a.sent();
                        throw error_5;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.getDeviceClosedMeasurementByDeviceId = function (deviceId) {
        return __awaiter(this, void 0, void 0, function () {
            var previousMeasurementRepo, previousMeasurementRepoToGet, error_6;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        previousMeasurementRepo = this.connection.getRepository(_entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__["DeviceClosedMeasurementEntity"]);
                        return [4 /*yield*/, previousMeasurementRepo.findOne({
                                where: {
                                    deviceId: deviceId
                                }
                            })];
                    case 1:
                        previousMeasurementRepoToGet = _a.sent();
                        return [2 /*return*/, previousMeasurementRepoToGet];
                    case 2:
                        error_6 = _a.sent();
                        throw error_6;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.addMeasurement = function (measurement) {
        return __awaiter(this, void 0, void 0, function () {
            var measurementEntity, startTs, endTs, measurementRepo, error_7;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        measurementEntity = new _entities_measurement__WEBPACK_IMPORTED_MODULE_5__["MeasurementEntity"]();
                        startTs = Object(date_fns__WEBPACK_IMPORTED_MODULE_11__["getTime"])(Object(date_fns__WEBPACK_IMPORTED_MODULE_11__["startOfDay"])(measurement.startTs));
                        endTs = Object(date_fns__WEBPACK_IMPORTED_MODULE_11__["getTime"])(Object(date_fns__WEBPACK_IMPORTED_MODULE_11__["endOfDay"])(measurement.endTs));
                        measurementEntity.deviceId = measurement.deviceId;
                        measurementEntity.runtime = measurement.runtime;
                        measurementEntity.water = measurement.water;
                        measurementEntity.bootCount = measurement.bootCount;
                        measurementEntity.energy = measurement.energy;
                        measurementEntity.startTs = startTs;
                        measurementEntity.endTs = endTs;
                        measurementRepo = this.connection.getRepository(_entities_measurement__WEBPACK_IMPORTED_MODULE_5__["MeasurementEntity"]);
                        return [4 /*yield*/, measurementRepo.save(measurementEntity)];
                    case 1:
                        _a.sent();
                        return [3 /*break*/, 3];
                    case 2:
                        error_7 = _a.sent();
                        throw error_7;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.getCurrentDayMeasurement = function (deviceId, endTs) {
        return __awaiter(this, void 0, void 0, function () {
            var measurementsRepo, measurement, error_8;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        console.log('getCurrentDayMeasurement', deviceId, endTs);
                        measurementsRepo = this.connection.getRepository(_entities_measurement__WEBPACK_IMPORTED_MODULE_5__["MeasurementEntity"]);
                        return [4 /*yield*/, measurementsRepo.find({
                                where: {
                                    deviceId: deviceId,
                                    // startTs: MoreThanOrEqual(from),
                                    endTs: Object(typeorm__WEBPACK_IMPORTED_MODULE_2__["Equal"])(endTs),
                                }
                            })];
                    case 1:
                        measurement = _a.sent();
                        // allMeasurements = allMeasurements.length > 0 ? [...allMeasurements, ...measurements] : [...measurements];
                        // }
                        // const sorted = _.orderBy(allMeasurements, ['startTs', ['desc']])
                        // return sorted;
                        return [2 /*return*/, measurement];
                    case 2:
                        error_8 = _a.sent();
                        throw error_8;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.updateMeasurement = function (measurement) {
        return __awaiter(this, void 0, void 0, function () {
            var measurementRepo, measurementToUpdate, sum, savedMeasurement, error_9;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 6, , 7]);
                        measurementRepo = this.connection.getRepository(_entities_measurement__WEBPACK_IMPORTED_MODULE_5__["MeasurementEntity"]);
                        return [4 /*yield*/, measurementRepo.findOne({
                                where: {
                                    deviceId: measurement.deviceId,
                                    endTs: measurement.endTs
                                }
                            })];
                    case 1:
                        measurementToUpdate = _a.sent();
                        if (!measurementToUpdate) return [3 /*break*/, 4];
                        sum = {
                            runtime: measurementToUpdate.runtime + measurement.runtime,
                            water: measurementToUpdate.water + measurement.water,
                            energy: measurementToUpdate.energy + measurement.energy,
                            bootCount: measurementToUpdate.bootCount + measurement.bootCount,
                            deviceId: measurementToUpdate.deviceId,
                            startTs: measurementToUpdate.startTs,
                            endTs: measurementToUpdate.endTs,
                            id: measurementToUpdate.id
                        };
                        // await measurementRepo.save(measurementToUpdate);
                        return [4 /*yield*/, measurementRepo.update(measurementToUpdate.id, sum)];
                    case 2:
                        // await measurementRepo.save(measurementToUpdate);
                        _a.sent();
                        return [4 /*yield*/, measurementRepo.findOne({
                                where: {
                                    deviceId: measurement.deviceId,
                                    id: measurementToUpdate.id
                                }
                            })];
                    case 3:
                        savedMeasurement = _a.sent();
                        console.log('updateMeasurement savedMeasurement', savedMeasurement);
                        return [2 /*return*/, savedMeasurement];
                    case 4:
                        console.warn('no measurement to update');
                        _a.label = 5;
                    case 5: return [3 /*break*/, 7];
                    case 6:
                        error_9 = _a.sent();
                        throw error_9;
                    case 7: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.getMeasurements = function (deviceIds, from, to) {
        return __awaiter(this, void 0, void 0, function () {
            var startTs, endTs, measurementsRepo, allMeasurements, _i, deviceIds_2, id, measurements, sorted, error_10;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        startTs = Object(date_fns__WEBPACK_IMPORTED_MODULE_11__["getTime"])(Object(date_fns__WEBPACK_IMPORTED_MODULE_11__["startOfDay"])(from));
                        endTs = Object(date_fns__WEBPACK_IMPORTED_MODULE_11__["getTime"])(Object(date_fns__WEBPACK_IMPORTED_MODULE_11__["endOfDay"])(to));
                        measurementsRepo = this.connection.getRepository(_entities_measurement__WEBPACK_IMPORTED_MODULE_5__["MeasurementEntity"]);
                        allMeasurements = [];
                        _i = 0, deviceIds_2 = deviceIds;
                        _a.label = 1;
                    case 1:
                        if (!(_i < deviceIds_2.length)) return [3 /*break*/, 4];
                        id = deviceIds_2[_i];
                        return [4 /*yield*/, measurementsRepo.find({
                                where: {
                                    deviceId: id,
                                    startTs: Object(typeorm__WEBPACK_IMPORTED_MODULE_2__["MoreThanOrEqual"])(startTs),
                                    endTs: Object(typeorm__WEBPACK_IMPORTED_MODULE_2__["LessThanOrEqual"])(endTs),
                                    order: {
                                        startTs: 'DESC'
                                    }
                                }
                            })];
                    case 2:
                        measurements = _a.sent();
                        allMeasurements = allMeasurements.length > 0 ? allMeasurements.concat(measurements) : measurements.slice();
                        _a.label = 3;
                    case 3:
                        _i++;
                        return [3 /*break*/, 1];
                    case 4:
                        sorted = lodash__WEBPACK_IMPORTED_MODULE_9__["orderBy"](allMeasurements, ['endTs', ['desc']]);
                        return [2 /*return*/, sorted];
                    case 5:
                        error_10 = _a.sent();
                        throw error_10;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.getPreviousMeasurement = function (deviceId) {
        return __awaiter(this, void 0, void 0, function () {
            var previousMeasurementRepo, previousMeasurementRepoToGet, measurement, error_11;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 2, , 3]);
                        previousMeasurementRepo = this.connection.getRepository(_entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__["PreviousMeasurementEntity"]);
                        return [4 /*yield*/, previousMeasurementRepo.findOne({
                                where: {
                                    deviceId: deviceId
                                }
                            })];
                    case 1:
                        previousMeasurementRepoToGet = _a.sent();
                        if (previousMeasurementRepoToGet /* && previousMeasurementRepoToGet[0] */) {
                            return [2 /*return*/, previousMeasurementRepoToGet /* [0] */];
                        }
                        else {
                            measurement = {
                                // id: deviceId,
                                deviceId: deviceId,
                                runtime: 0,
                                bootCount: 0,
                                energy: 0,
                                water: 0,
                            };
                            console.log('previousMeasurementRepoToGet measurement', measurement);
                            return [2 /*return*/, measurement];
                        }
                        return [3 /*break*/, 3];
                    case 2:
                        error_11 = _a.sent();
                        throw error_11;
                    case 3: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.updatePreviousMeasurement = function (measurement) {
        return __awaiter(this, void 0, void 0, function () {
            var previousMeasurementRepo, previousMeasurementRepoToUpdate, savedMeasurement, error_12;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 4, , 5]);
                        console.log('updatePreviousMeasurement measurement', measurement);
                        previousMeasurementRepo = this.connection.getRepository(_entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__["PreviousMeasurementEntity"]);
                        return [4 /*yield*/, previousMeasurementRepo.findOne({
                                where: {
                                    deviceId: measurement.deviceId,
                                }
                            })];
                    case 1:
                        previousMeasurementRepoToUpdate = _a.sent();
                        console.log('previousMeasurementRepoToUpdate find', previousMeasurementRepoToUpdate);
                        // previousMeasurementRepoToUpdate = measurement;
                        previousMeasurementRepoToUpdate.bootCount = measurement.bootCount;
                        previousMeasurementRepoToUpdate.deviceId = measurement.deviceId;
                        previousMeasurementRepoToUpdate.energy = measurement.energy;
                        // previousMeasurementRepoToUpdate.id = measurement.id
                        previousMeasurementRepoToUpdate.runtime = measurement.runtime;
                        previousMeasurementRepoToUpdate.water = measurement.water;
                        // previousMeasurementRepo.update(previousMeasurementRepoToUpdate)
                        return [4 /*yield*/, previousMeasurementRepo.update(measurement.deviceId, previousMeasurementRepoToUpdate)];
                    case 2:
                        // previousMeasurementRepo.update(previousMeasurementRepoToUpdate)
                        _a.sent();
                        return [4 /*yield*/, previousMeasurementRepo.find({
                                where: {
                                    deviceId: measurement.deviceId
                                }
                            })
                            // console.warn('updatePreviousMeasurement saved', savedMeasurement);
                        ];
                    case 3:
                        savedMeasurement = _a.sent();
                        return [3 /*break*/, 5];
                    case 4:
                        error_12 = _a.sent();
                        throw error_12;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.deletePreviousMeasurement = function (deviceId) {
        return __awaiter(this, void 0, void 0, function () {
            var previousMeasurementRepo, previousMeasurementRepoToDelete, error_13;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        previousMeasurementRepo = this.connection.getRepository(_entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__["PreviousMeasurementEntity"]);
                        return [4 /*yield*/, previousMeasurementRepo.findOne({
                                where: {
                                    deviceId: deviceId
                                }
                            })];
                    case 1:
                        previousMeasurementRepoToDelete = _a.sent();
                        if (!previousMeasurementRepoToDelete /*  && previousMeasurementRepoToDelete[0]*/) return [3 /*break*/, 3]; /*  && previousMeasurementRepoToDelete[0]*/
                        return [4 /*yield*/, Object(typeorm__WEBPACK_IMPORTED_MODULE_2__["getConnection"])()
                                .createQueryBuilder()
                                .delete()
                                .from(_entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__["PreviousMeasurementEntity"])
                                .where('deviceId = :deviceId', {
                                deviceId: previousMeasurementRepoToDelete /* [0] */.deviceId
                            })
                                .execute()];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        console.error('could find previous to delete');
                        _a.label = 4;
                    case 4: return [3 /*break*/, 6];
                    case 5:
                        error_13 = _a.sent();
                        throw error_13;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.deleteDeviceClosedMeasurement = function (deviceId) {
        return __awaiter(this, void 0, void 0, function () {
            var DeviceClosedMeasurementRepo, DeviceClosedMeasurementRepoToDelete, error_14;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 5, , 6]);
                        DeviceClosedMeasurementRepo = this.connection.getRepository(_entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__["DeviceClosedMeasurementEntity"]);
                        return [4 /*yield*/, DeviceClosedMeasurementRepo.findOne({
                                where: {
                                    deviceId: deviceId
                                }
                            })];
                    case 1:
                        DeviceClosedMeasurementRepoToDelete = _a.sent();
                        if (!DeviceClosedMeasurementRepoToDelete) return [3 /*break*/, 3];
                        return [4 /*yield*/, Object(typeorm__WEBPACK_IMPORTED_MODULE_2__["getConnection"])()
                                .createQueryBuilder()
                                .delete()
                                .from(_entities_deviceClosedMeasurement__WEBPACK_IMPORTED_MODULE_8__["DeviceClosedMeasurementEntity"])
                                .where('deviceId = :deviceId', {
                                deviceId: DeviceClosedMeasurementRepoToDelete.deviceId
                            })
                                .execute()];
                    case 2:
                        _a.sent();
                        return [3 /*break*/, 4];
                    case 3:
                        console.error('could find previous to delete');
                        _a.label = 4;
                    case 4: return [3 /*break*/, 6];
                    case 5:
                        error_14 = _a.sent();
                        throw error_14;
                    case 6: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.initPreviousMeasurement = function (cumulativeData, deviceId) {
        return __awaiter(this, void 0, void 0, function () {
            var measurement, previousMeasurementRepo, savedMeasurement, error_15;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        console.log('initPreviousMeasurement', cumulativeData, deviceId);
                        _a.label = 1;
                    case 1:
                        _a.trys.push([1, 4, , 5]);
                        measurement = new _entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__["PreviousMeasurementEntity"]();
                        // measurement.id = deviceId;
                        measurement.deviceId = deviceId;
                        measurement.runtime = cumulativeData.runtime;
                        measurement.bootCount = cumulativeData.bootCount;
                        measurement.energy = cumulativeData.energy;
                        measurement.water = cumulativeData.water;
                        previousMeasurementRepo = this.connection.getRepository(_entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__["PreviousMeasurementEntity"]);
                        return [4 /*yield*/, previousMeasurementRepo.save(measurement)];
                    case 2:
                        _a.sent();
                        return [4 /*yield*/, previousMeasurementRepo.find({
                                where: {
                                    deviceId: deviceId
                                }
                            })
                            // console.warn('initPreviousMeasurement saved', savedMeasurement);
                        ];
                    case 3:
                        savedMeasurement = _a.sent();
                        return [3 /*break*/, 5];
                    case 4:
                        error_15 = _a.sent();
                        throw error_15;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider.prototype.clearMeasurementsByDeviceId = function (id, removePrevious) {
        return __awaiter(this, void 0, void 0, function () {
            var error_16;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        _a.trys.push([0, 4, , 5]);
                        if (!removePrevious) return [3 /*break*/, 2];
                        return [4 /*yield*/, this.connection.createQueryBuilder().delete().from(_entities_prevousMeasurement__WEBPACK_IMPORTED_MODULE_7__["PreviousMeasurementEntity"])
                                .where("deviceId = :id", {
                                id: id
                            }).execute()];
                    case 1:
                        _a.sent();
                        _a.label = 2;
                    case 2: return [4 /*yield*/, this.connection.createQueryBuilder().delete().from(_entities_measurement__WEBPACK_IMPORTED_MODULE_5__["MeasurementEntity"])
                            .where("deviceId = :id", {
                            id: id
                        }).execute()];
                    case 3:
                        _a.sent();
                        return [3 /*break*/, 5];
                    case 4:
                        error_16 = _a.sent();
                        throw error_16;
                    case 5: return [2 /*return*/];
                }
            });
        });
    };
    LocalDatabaseProvider = __decorate([
        Object(_angular_core__WEBPACK_IMPORTED_MODULE_0__["Injectable"])(),
        __metadata("design:paramtypes", [_ionic_angular__WEBPACK_IMPORTED_MODULE_1__["Platform"],
            _data__WEBPACK_IMPORTED_MODULE_4__["DataProvider"]])
    ], LocalDatabaseProvider);
    return LocalDatabaseProvider;
}());



/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./src/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! C:\work\dev\streamsave\src\main.ts */"./src/main.ts");


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map